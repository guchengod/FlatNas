import{d as E,u as V,r as g,c as k,y as j,w as S,a as x,e as c,b as f,g as t,l as b,m,j as z}from"./index-DXce9nG8.js";const B=["id"],I=["innerHTML"],$={key:2,class:"absolute inset-0 z-40 bg-white flex flex-col p-4 gap-2 overflow-auto"},A={class:"flex items-center justify-between mb-2"},N={class:"flex gap-2"},U={class:"cursor-pointer px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs flex items-center gap-1 text-gray-900"},D={class:"flex flex-col gap-1"},F={class:"flex-1 flex flex-col gap-1 min-h-0"},P={class:"flex-1 flex flex-col gap-1 min-h-0"},G=E({__name:"CustomCssWidget",props:{widget:{}},setup(y){const n=y,i=V(),r=g(!1),d=k(()=>i.isLogged),v=g(n.widget.data?.title||"è‡ªå®šä¹‰ç»„ä»¶"),s=g(n.widget.data?.html||'<div class="my-component">Hello Custom Widget</div>'),a=g(n.widget.data?.css||".my-component { color: blue; font-weight: bold; }"),w=k(()=>`style-${n.widget.id}`),h=()=>{let o=document.getElementById(w.value);o||(o=document.createElement("style"),o.id=w.value,document.head.appendChild(o));const e=a.value.replace(/([^\r\n,{}]+)(,(?=[^}]*{)|\s*{)/g,`#widget-${n.widget.id} $1$2`);o.textContent=e},M=()=>{if(!d.value)return;const o=i.widgets.find(e=>e.id===n.widget.id);o&&(o.data={title:v.value,html:s.value,css:a.value},i.saveData()),r.value=!1,h()},T=()=>{navigator.clipboard.writeText(`è¯·å¸®æˆ‘å†™ä¸€ä¸ªç®€æ´çš„ HTML/CSS å¡ç‰‡ç»„ä»¶ã€‚
åŠŸèƒ½ï¼š[åœ¨æ­¤è¾“å…¥ä½ çš„éœ€æ±‚ï¼Œå¦‚ï¼šæ˜¾ç¤ºå½“å‰æ—¥æœŸå’Œä¸€å¥åè¨€]
è¦æ±‚ï¼š
1. å®¹å™¨å®½é«˜è‡ªé€‚åº”ï¼Œå†…å®¹å±…ä¸­ã€‚
2. é£æ ¼ç°ä»£ç®€çº¦ï¼Œåœ†è§’è®¾è®¡ã€‚
3. è¯·åˆ†åˆ«æä¾› HTML å’Œ CSS ä»£ç ã€‚`).then(()=>{alert("æç¤ºè¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¿«å»å‘é€ç»™ AI å§ï¼")})},C=()=>{d.value&&(r.value=!r.value)},L=o=>{if(!d.value)return;const e=o.target.files?.[0];if(!e)return;const l=new FileReader;l.onload=H=>{try{const u=H.target?.result;try{const p=JSON.parse(u);p.html&&(s.value=p.html),p.css&&(a.value=p.css)}catch{s.value=u}}catch(u){console.error("Failed to read file",u)}},l.readAsText(e)};return j(()=>{h()}),S([s,a],()=>{}),S(()=>i.isLogged,o=>{o||(r.value=!1)},{immediate:!0}),(o,e)=>(c(),x("div",{id:`widget-${y.widget.id}`,class:"w-full h-full relative group overflow-hidden bg-transparent rounded-xl"},[r.value?f("",!0):(c(),x("div",{key:0,class:"w-full h-full overflow-auto custom-content",innerHTML:s.value},null,8,I)),d.value?(c(),x("button",{key:1,onClick:C,class:"absolute top-2 right-2 z-50 p-1.5 bg-gray-100 hover:bg-gray-200 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity text-gray-600",title:"ç¼–è¾‘ç»„ä»¶"},[...e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])])):f("",!0),r.value&&d.value?(c(),x("div",$,[t("div",A,[e[5]||(e[5]=t("h3",{class:"font-bold text-gray-700"},"ç¼–è¾‘è‡ªå®šä¹‰ç»„ä»¶",-1)),t("div",N,[t("label",U,[e[4]||(e[4]=t("span",null,"ğŸ“‚ å¯¼å…¥",-1)),t("input",{type:"file",accept:".json,.txt",class:"hidden",onChange:L},null,32)]),t("button",{onClick:M,class:"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600"}," ä¿å­˜ "),t("button",{onClick:C,class:"px-2 py-1 bg-gray-200 text-gray-700 rounded text-xs hover:bg-gray-300"}," å–æ¶ˆ ")])]),t("div",D,[e[6]||(e[6]=t("label",{class:"text-xs font-semibold text-gray-500"},"æ ‡é¢˜",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>v.value=l),class:"p-2 border rounded text-xs focus:border-blue-500 outline-none text-gray-900",placeholder:"è‡ªå®šä¹‰ç»„ä»¶"},null,512),[[m,v.value]])]),t("div",F,[e[7]||(e[7]=t("label",{class:"text-xs font-semibold text-gray-500"},"HTML",-1)),b(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value=l),class:"flex-1 p-2 border rounded font-mono text-xs resize-none focus:border-blue-500 outline-none text-gray-900",placeholder:"<div>Content</div>"},null,512),[[m,s.value]])]),t("div",P,[e[8]||(e[8]=t("label",{class:"text-xs font-semibold text-gray-500"},"CSS",-1)),b(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.value=l),class:"flex-1 p-2 border rounded font-mono text-xs resize-none focus:border-blue-500 outline-none text-gray-900",placeholder:".class { color: red; }"},null,512),[[m,a.value]])]),e[12]||(e[12]=t("p",{class:"text-[10px] text-gray-400 mt-1"}," æç¤º: CSS é€‰æ‹©å™¨ä¼šè‡ªåŠ¨åŠ ä¸Šå‰ç¼€ä»¥é¿å…æ±¡æŸ“å…¨å±€æ ·å¼ï¼Œä½†å»ºè®®ä½¿ç”¨ç‹¬ç‰¹çš„ç±»åã€‚ ",-1)),t("div",{class:"mt-2 p-2 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-100"},[e[10]||(e[10]=t("div",{class:"flex items-center gap-1 mb-1.5"},[t("span",{class:"text-sm"},"ğŸ¤–"),t("span",{class:"text-xs font-bold text-purple-700"},"AI è¾…åŠ©ç”Ÿæˆ")],-1)),e[11]||(e[11]=t("p",{class:"text-[10px] text-gray-600 mb-1.5"}," å¤åˆ¶ä¸‹æ–¹æç¤ºè¯ç»™ AI (å¦‚ ChatGPT/DeepSeek)ï¼Œå³å¯å¿«é€Ÿç”Ÿæˆç»„ä»¶ä»£ç ï¼š ",-1)),t("div",{class:"bg-white p-2 rounded border border-purple-100 text-[10px] text-gray-500 font-mono break-all cursor-pointer hover:border-purple-300 transition-colors relative group",onClick:T,title:"ç‚¹å‡»å¤åˆ¶æç¤ºè¯"},[...e[9]||(e[9]=[t("div",{class:"hidden group-hover:block absolute right-1 top-1 bg-purple-100 text-purple-600 px-1 py-0.5 rounded text-[10px]"}," ç‚¹å‡»å¤åˆ¶ ",-1),t("span",{class:"text-purple-600 select-none"},"Prompt: ",-1),z("è¯·å¸®æˆ‘å†™ä¸€ä¸ªç®€æ´çš„ HTML/CSS å¡ç‰‡ç»„ä»¶... ",-1)])])])])):f("",!0)],8,B))}});export{G as default};
