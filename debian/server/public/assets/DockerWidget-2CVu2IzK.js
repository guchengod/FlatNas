import{d as Dt,u as $t,r as b,c as A,y as Ut,o as Ht,a as l,e as i,b as f,g as o,t as p,j as B,F as lt,h as it,p as dt,l as Lt,m as Nt,q as ct,_ as Tt}from"./index-DXce9nG8.js";const Ot={key:0,class:"flex items-center justify-between mb-1 shrink-0"},At={class:"flex items-center gap-2"},Bt=["title","disabled"],Et={key:0,class:"animate-spin inline-block w-3 h-3 border-2 border-gray-500 border-t-transparent rounded-full mr-1"},Rt={key:1,class:"mr-1"},Ft={key:2,class:"text-yellow-600 flex items-center"},Vt={key:3},jt={key:0,class:"animate-spin inline-block w-3 h-3 border-2 border-blue-500 border-t-transparent rounded-full mr-1"},zt={key:0,class:"text-xs text-gray-500"},Wt={key:1,class:"flex-1 flex flex-col items-center justify-start pt-10 text-red-500 text-xs text-center p-2 gap-2"},Gt={key:2,class:"flex-1 flex flex-col items-center justify-start pt-10 text-gray-400 text-xs text-center p-2 gap-2"},Kt={key:3,class:"flex flex-col h-full overflow-hidden relative"},Jt={key:0,class:"absolute top-0 left-0 right-0 z-10 bg-yellow-50/90 text-yellow-600 text-[10px] px-2 py-0.5 text-center backdrop-blur-sm border-b border-yellow-100"},Yt={class:"flex-1 overflow-y-auto space-y-1 pr-1 custom-scrollbar min-h-0 pt-1"},qt={class:"flex items-center justify-between border-b border-gray-100 dark:border-gray-700 pb-1 mb-1"},Xt={class:"flex gap-2"},Zt={class:"px-1.5 py-0.5 bg-green-100 text-green-700 rounded flex items-center gap-1 text-xs",title:"Running"},Qt={class:"px-1.5 py-0.5 bg-gray-100 text-gray-600 rounded flex items-center gap-1 text-xs",title:"Stopped"},te={key:0,class:"px-1.5 py-0.5 bg-red-100 text-red-700 rounded flex items-center gap-1 text-xs",title:"Unhealthy"},ee={key:0,class:"flex gap-2 text-[10px] text-gray-400 items-center ml-1"},se={title:"Images"},ne={class:"grid grid-cols-[1fr_auto] gap-2 items-start"},oe={class:"flex items-start gap-2 min-w-0"},ae={class:"flex flex-col min-w-0 flex-1"},re={class:"flex items-center gap-1 min-w-0"},le=["title"],ie={key:0,class:"text-[9px] bg-red-50 text-red-600 px-1 rounded border border-red-200 shrink-0"},de={class:"flex items-center gap-2 min-w-0"},ce=["title"],ue=["onClick"],pe={key:0,class:"flex items-center gap-1 mt-1"},ge=["onClick"],me={class:"flex flex-col items-end shrink-0"},fe={class:"text-[10px] text-black"},he={key:0,class:"flex flex-wrap justify-end gap-1 mt-0.5"},ve={key:0,class:"text-[9px] text-black"},xe={class:"grid grid-cols-2 gap-2 mt-1"},be={class:"flex flex-col gap-1"},ke={class:"flex justify-between text-[10px] text-gray-500 dark:text-gray-300 items-end"},ye={key:0,class:"font-mono"},we={key:1,class:"text-gray-300 dark:text-gray-500"},Pe={class:"h-1.5 bg-gray-100 dark:bg-gray-600 rounded-full overflow-hidden"},_e={class:"flex justify-between text-[9px] text-gray-400 dark:text-gray-400 mt-0.5 font-mono items-center"},Ie={key:0,class:"tracking-tighter"},Ce={key:1,class:"text-gray-300 dark:text-gray-500"},Se={class:"flex flex-col gap-1"},Me={class:"flex justify-between text-[10px] text-gray-500 dark:text-gray-300 items-end"},De={key:0,class:"font-mono"},$e={key:1,class:"text-gray-300 dark:text-gray-500"},Ue={class:"h-1.5 bg-gray-100 dark:bg-gray-600 rounded-full overflow-hidden"},He={class:"flex justify-between text-[9px] text-gray-400 dark:text-gray-400 mt-0.5 font-mono items-center"},Le={key:0,class:"tracking-tighter"},Ne={key:1,class:"text-gray-300 dark:text-gray-500"},Te={class:"flex items-center justify-end gap-2 mt-1 pt-1 border-t border-gray-100 dark:border-gray-700"},Oe={class:"flex flex-wrap items-center gap-1 mr-auto min-w-0"},Ae=["onClick"],Be=["onClick"],Ee=["onClick"],Re={class:"flex items-center gap-1 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded select-none",title:"å‹¾é€‰åå°†è·³è¿‡æ­¤å®¹å™¨çš„è‡ªåŠ¨å‡çº§"},Fe=["checked","onChange"],Ve={class:"flex items-center gap-1 shrink-0"},je=["onClick"],ze=["onClick"],We=["onClick"],ut=12e3,Ge=17e3,Ke=36e3,w=1024*1024,Je=180*1e3,Ye=1e4,pt=6e4,qe=Dt({__name:"DockerWidget",props:{widget:{},compact:{type:Boolean}},setup(gt){const x=$t(),c=gt,E=b(null),X=A(()=>g.value.filter(s=>s.Status&&s.Status.toLowerCase().includes("unhealthy")).length),mt=[{Id:"mock-1",Names:["/nginx-proxy"],Image:"nginx:latest",State:"running",Status:"Up 2 hours",Ports:[{PublicPort:80,PrivatePort:80}],stats:{cpuPercent:.5,memUsage:50*1024*1024,memLimit:1024*1024*1024,memPercent:4.8}},{Id:"mock-2",Names:["/redis-cache"],Image:"redis:alpine",State:"running",Status:"Up 5 days",Ports:[{PublicPort:6379,PrivatePort:6379}],stats:{cpuPercent:.1,memUsage:20*1024*1024,memLimit:1024*1024*1024,memPercent:1.9}},{Id:"mock-3",Names:["/postgres-db"],Image:"postgres:15",State:"running",Status:"Up 12 hours",Ports:[{PublicPort:5432,PrivatePort:5432}],stats:{cpuPercent:1.2,memUsage:120*1024*1024,memLimit:2048*1024*1024,memPercent:5.8}},{Id:"mock-4",Names:["/stopped-service"],Image:"busybox:latest",State:"exited",Status:"Exited (0) 3 hours ago",Ports:[]},{Id:"mock-5",Names:["/internal-worker"],Image:"python:3.9-slim",State:"running",Status:"Up 45 mins",Ports:[],stats:{cpuPercent:45.5,memUsage:300*1024*1024,memLimit:1024*1024*1024,memPercent:29.3}},{Id:"mock-6",Names:["/very-long-container-name-for-testing-ui-layout-truncation"],Image:"node:18-alpine",State:"running",Status:"Up 1 day",Ports:[{PublicPort:3e3,PrivatePort:3e3},{PublicPort:8080,PrivatePort:8080}],stats:{cpuPercent:2.5,memUsage:150*1024*1024,memLimit:1024*1024*1024,memPercent:14.6}},...Array.from({length:44},(s,t)=>({Id:`mock-extra-${t+7}`,Names:[`/extra-container-${t+7}`],Image:"alpine:latest",State:Math.random()>.2?"running":"exited",Status:"Up 1 hour",Ports:[{PublicPort:9e3+t,PrivatePort:80}],stats:{cpuPercent:+(Math.random()*5).toFixed(1),memUsage:Math.round((20+Math.random()*100)*1024*1024),memLimit:1024*1024*1024,memPercent:5}}))],C=A(()=>!!c.widget?.data?.useMock),R=A(()=>!!c.widget?.data?.autoUpdate),g=b([]),h=b("");let P=null;const ft=s=>{if(!s)return"";const t=s.toLowerCase();return t.includes("docker not available")?"Docker æœªå¯ç”¨æˆ–æœªé…ç½®è¿æ¥åœ°å€ã€‚å®¹å™¨éƒ¨ç½²è¯·æŒ‚è½½ /var/run/docker.sock å¹¶è®¾ç½® dockerHost=unix:///var/run/docker.sock":t.includes("docker.sock")||t.includes("unix:///var/run/docker.sock")?"æ— æ³•è¿æ¥ Docker Socketï¼Œè¯·ç¡®è®¤å®¿ä¸»æœº Docker å·²å¯åŠ¨ï¼Œå¹¶åœ¨å®¹å™¨ä¸­æŒ‚è½½ /var/run/docker.sock":t.includes("pipe/docker_engine")||t.includes("open //./pipe/docker_engine")||t.includes("system cannot find the file specified")?"æœªæ£€æµ‹åˆ° Docker å¼•æ“ï¼Œè¯·å¯åŠ¨ Docker Desktop æˆ–é…ç½® dockerHost":t.includes("elevated privileges")?"Windows éœ€è¦ç®¡ç†å‘˜æƒé™è®¿é—® Docker å¼•æ“":s},Z=A(()=>ft(h.value)),F=s=>{const t=Math.floor(s/1e3),e=Math.floor(t/60),n=Math.floor(e/60),a=Math.floor(n/24);return a>0?`${a} days`:n>0?`${n} hours`:e>0?`${e} mins`:`${t}s`},S=s=>{if(!s||s<=0)return"0B";const t=1024,e=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(s)/Math.log(t)),a=Math.min(Math.max(n,0),e.length-1);return parseFloat((s/Math.pow(t,a)).toFixed(1))+(e[a]??"B")},ht=(s,t)=>{const e=g.value.findIndex(a=>a.Id===s);if(e<0)return;const n=g.value[e];if(t==="start"){n.State="running",n.mockStartAt=Date.now();const a=1024*w,d=Math.round(20*w+Math.random()*80*w),r=+(Math.random()*2).toFixed(1),u=+(d/a*100).toFixed(1);n.stats={cpuPercent:r,memUsage:d,memLimit:a,memPercent:u},n.Status=`Up ${F(0)}`}else if(t==="stop")n.State="exited",n.stats=void 0,n.Status="Exited";else if(t==="restart"){n.State="running",n.mockStartAt=Date.now();const a=1024*w,d=Math.round(20*w+Math.random()*80*w),r=+(Math.random()*2).toFixed(1),u=+(d/a*100).toFixed(1);n.stats={cpuPercent:r,memUsage:d,memLimit:a,memPercent:u},n.Status=`Up ${F(0)}`}g.value=[...g.value]},M=b(0),V=b(0),m=b(null),j=b(!1),vt=async()=>{if(!(j.value||m.value?.isChecking)){if(!R.value){_("è¯·å…ˆå¼€å¯è‡ªåŠ¨å‡çº§é•œåƒ");return}try{j.value=!0;const s=x.getHeaders();await fetch("/api/docker/check-updates",{method:"POST",headers:s}),setTimeout($,500)}catch(s){console.error("Failed to trigger update check",s)}finally{j.value=!1}}},D=b(!1),$=async()=>{if(C.value){if(!g.value.length)g.value=JSON.parse(JSON.stringify(mt)),g.value.forEach(s=>{s.State==="running"&&(s.mockStartAt=Date.now())}),V.value=Date.now(),at(g.value);else{const s=Date.now();if(s-V.value<4500){h.value="";return}V.value=s,g.value=g.value.map(t=>{if(t.State==="running"){const e=t.stats?.memLimit??1024*w,n=t.stats?.memUsage??50*w,a=Math.max(20*w,Math.min(e*.8,Math.round(n*(1+(Math.random()-.5)*.1)))),d=t.stats?.cpuPercent??.5,r=Math.max(0,Math.min(100,+(d*(1+(Math.random()-.5)*.2)).toFixed(1))),u=+(a/e*100).toFixed(1),k=t.stats?.netIO||{rx:0,tx:0},v=t.stats?.blockIO||{read:0,write:0};Math.random()>.5&&(k.rx+=Math.floor(Math.random()*1024*10),k.tx+=Math.floor(Math.random()*1024*10),v.read+=Math.floor(Math.random()*1024*10),v.write+=Math.floor(Math.random()*1024*10)),t.stats={cpuPercent:r,memUsage:a,memLimit:e,memPercent:u,netIO:k,blockIO:v},t.mockStartAt&&(t.Status=`Up ${F(Date.now()-t.mockStartAt)}`)}return t})}h.value="";return}try{D.value=!0;const s=x.getHeaders(),t=await fetch("/api/docker/containers",{headers:s});if(!t.ok){h.value="è¿æ¥å¼‚å¸¸ï¼Œæ­£åœ¨é‡è¯•...";return}const e=await t.json();if(e.success)g.value=e.data||[],e.updateStatus&&(m.value=e.updateStatus),at(g.value),M.value=0,h.value="";else if(e.error&&e.error.includes("Docker not available"))if(h.value=e.error||"Docker ä¸å¯ç”¨",M.value++,Date.now()<z.value)h.value=(e.error||"Docker ä¸å¯ç”¨")+" (å¯åŠ¨æ£€æµ‹ä¸­...)";else{G();return}else h.value=e.error||"è·å–æ•°æ®å¤±è´¥"}catch(s){const t=s instanceof Error?s.message:String(s);h.value="ç½‘ç»œè¿æ¥ä¸ç¨³å®š: "+t}finally{D.value=!1}},Q=b("");let U=null;const _=(s,t=2e3)=>{Q.value=s,U&&clearTimeout(U),U=setTimeout(()=>{Q.value="",U=null},t)},xt=async(s=!0)=>{if(!C.value)try{const t=x.getHeaders(),n=await(await fetch("/api/docker/info",{headers:t})).json();n.success?(E.value=n.info,s||_("âœ… Docker è¿æ¥æˆåŠŸ")):s||_(`âŒ è¿æ¥å¤±è´¥: ${n.error}`)}catch(t){if(!s){const e=t instanceof Error?t.message:String(t);_("âŒ ç½‘ç»œé”™è¯¯: "+e)}}},z=b(0),H=(s=!1)=>{h.value="",M.value=0,z.value=Date.now()+Je,$(),xt(s),tt()},W=async(s,t)=>{if(C.value){ht(s,t);return}try{const e=x.getHeaders();(await fetch(`/api/docker/container/${s}/${t}`,{method:"POST",headers:e})).ok&&$()}catch(e){console.error(e)}},tt=()=>{P&&clearTimeout(P);const s=async()=>{if(document.visibilityState==="hidden")return;await $(),bt();let e=ut+Math.random()*(Ge-ut);C.value?e=5e3:M.value>0&&(Date.now()<z.value?e=Ye:e=Ke),P=setTimeout(s,e)},t=Math.random()*2e3;P=setTimeout(s,t)},G=()=>{P&&clearTimeout(P),P=null},et=()=>{document.visibilityState==="hidden"?G():tt()};Ut(()=>{H(),document.addEventListener("visibilitychange",et)}),Ht(()=>{G(),document.removeEventListener("visibilitychange",et)});const y=b({}),K=new Set,bt=()=>{const s=Date.now();for(const t in y.value){const e=y.value[t];e&&s-e.ts>pt&&delete y.value[t]}},st=s=>String(s||"").replace(/^\//,"").trim(),nt=async s=>{const t=y.value[s],e=Date.now();if(t&&e-t.ts<pt)return t.data;if(K.has(s))return t?t.data:null;K.add(s);try{const n=x.getHeaders(),a=await fetch(`/api/docker/container/${encodeURIComponent(s)}/inspect-lite`,{headers:n}),d=await a.json().catch(()=>({}));if(!a.ok||!d||!d.success)return t?t.data:null;const r=d.data;return!r||typeof r.networkMode!="string"||!Array.isArray(r.ports)?t?t.data:null:(y.value={...y.value,[s]:{ts:e,data:r}},r)}catch{return t?t.data:null}finally{K.delete(s)}},ot=s=>(s.Ports||[]).map(t=>t.PublicPort).filter(t=>typeof t=="number"&&Number.isFinite(t)&&t>0&&t<=65535),L=s=>{const t=ot(s);if(t.length>0)return t;const e=y.value[s.Id]?.data;return e?e.networkMode!=="host"?[]:(e.ports||[]).filter(n=>typeof n=="number"&&Number.isFinite(n)&&n>0&&n<=65535):[]},I=[80,443,8080,8e3,8096,3e3,5e3,5001,5244,5678,9e3,9091],N=s=>{if(s.Ports&&s.Ports.length>0){const n=[...s.Ports].sort((a,d)=>{const r=a.PrivatePort?I.indexOf(a.PrivatePort):-1,u=d.PrivatePort?I.indexOf(d.PrivatePort):-1;return r!==-1&&u!==-1?r-u:r!==-1?-1:u!==-1?1:0}).find(a=>typeof a.PublicPort=="number"&&a.PublicPort>0&&a.PublicPort<=65535);if(n)return n.PublicPort}const t=y.value[s.Id]?.data;if(t&&t.ports&&t.ports.length>0){const e=t.ports.filter(n=>typeof n=="number"&&Number.isFinite(n)&&n>0&&n<=65535);if(e.length>0)return e.sort((a,d)=>{const r=I.indexOf(a),u=I.indexOf(d);return r!==-1&&u!==-1?r-u:r!==-1?-1:u!==-1?1:0})[0]??null}if(s.Ports&&s.Ports.length>0){const n=[...s.Ports].filter(a=>a.PrivatePort).sort((a,d)=>{const r=a.PrivatePort?I.indexOf(a.PrivatePort):-1,u=d.PrivatePort?I.indexOf(d.PrivatePort):-1;return r!==-1&&u!==-1?r-u:r!==-1?-1:u!==-1?1:0})[0];if(n?.PrivatePort)return n.PrivatePort}return null},at=s=>{if(C.value)return;const t=new Set(s.map(r=>r.Id)),e={...y.value};let n=!1;for(const r in e)t.has(r)||(delete e[r],n=!0);n&&(y.value=e);const a=s.filter(r=>r&&r.Id&&ot(r).length===0),d=5;for(let r=0;r<a.length;r+=d){const u=a.slice(r,r+d),k=r*200+Math.random()*500;setTimeout(()=>{u.forEach(v=>{nt(v.Id)})},k)}},J=s=>s.replace(/^https?:\/\//i,"").replace(/\/+$/,"").trim(),Y=s=>{const t=N(s);if(!t)return"";const e=(c.widget?.data&&typeof c.widget.data.lanHost=="string"?c.widget.data.lanHost.trim():"")||"",n=J(e)||window.location.hostname;return`${t===443?"https":"http"}://${n}:${t}`},q=s=>{const t=N(s);if(!t)return"";const n=((c.widget?.data&&typeof c.widget.data.publicHosts=="object"?c.widget.data.publicHosts:{})||{})[s.Id]?.trim()||"",a=(c.widget?.data&&typeof c.widget.data.publicHost=="string"?c.widget.data.publicHost.trim():"")||"";if(n)return/^https?:\/\//i.test(n)?n:`${t===443?"https":"http"}://${J(n)}:${t}`;if(a)return`${t===443?"https":"http"}://${J(a)}:${t}`;const d=window.location.hostname;return`${t===443?"https":"http"}://${d}:${t}`},rt=()=>!c.widget||!c.widget.data?[]:c.widget.data.disabledContainers||[],kt=s=>rt().includes(s),yt=(s,t)=>{if(!c.widget)return;const e=x.widgets.find(a=>a.id===c.widget.id);if(!e)return;e.data||(e.data={});const n=new Set(rt());t?n.add(s):n.delete(s),e.data.disabledContainers=Array.from(n),x.saveData(),_(t?"å·²ç¦æ­¢è¯¥å®¹å™¨è‡ªåŠ¨å‡çº§":"å·²æ¢å¤è¯¥å®¹å™¨è‡ªåŠ¨å‡çº§")},wt=s=>{const t=Y(s);t&&window.open(t,"_blank")},Pt=s=>{const t=q(s);t&&window.open(t,"_blank")},_t=s=>{let t=x.groups.find(n=>n.title==="Docker");if(!t){const n=Date.now().toString();x.groups.push({id:n,title:"Docker",items:[],cardLayout:"horizontal",gridGap:8,cardSize:120,iconSize:48,showCardBackground:!0}),t=x.groups.find(a=>a.title==="Docker")}if(!t)return;(async()=>{let n=Y(s),a=q(s);if(!n&&!a&&(await nt(s.Id),n=Y(s),a=q(s)),!n&&!a){const k=prompt("æœªæ£€æµ‹åˆ°ç«¯å£æ˜ å°„/æš´éœ²ç«¯å£ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥ç«¯å£å· (ä¾‹å¦‚ 8080):")?.trim();if(!k)return;const v=parseInt(k,10);if(!Number.isFinite(v)||v<=0||v>65535)return;n=`http://${(c.widget?.data&&typeof c.widget.data.lanHost=="string"?c.widget.data.lanHost.trim():"")||""||window.location.hostname}:${v}`,a=`http://${window.location.hostname}:${v}`}const d=st(s.Names?.[0]||"Container");if(t.items.some(k=>{if(k.containerId&&k.containerId===s.Id)return!0;const v=st(k.containerName||"");return!!(v&&v===d)})){_(`å®¹å™¨ "${d}" å·²å­˜åœ¨`);return}const u={id:Date.now().toString(),title:d,url:a,lanUrl:n,icon:"",isPublic:!1,openInNewTab:!0,containerId:s.Id,containerName:d,allowRestart:!0,allowStop:!0,description:"Docker Container"};x.addItem(u,t.id),_(`å·²æ·»åŠ  "${d}"`)})()},T=b(null),O=b(""),It=s=>{const t=(c.widget?.data&&typeof c.widget.data.publicHosts=="object"?c.widget.data.publicHosts:{})||{};O.value=t[s.Id]||"",T.value=s.Id},Ct=s=>{const t=x.widgets.find(n=>n.id===c.widget?.id);if(!t)return;t.data||(t.data={});const e=typeof t.data.publicHosts=="object"?t.data.publicHosts:{};e[s.Id]=O.value.trim(),t.data.publicHosts=e,x.saveData(),T.value=null},St=()=>{T.value=null},Mt=s=>s==="running"?"bg-green-500":s==="exited"?"bg-gray-400":"bg-yellow-500";return(s,t)=>(i(),l("div",{class:dt(["w-full h-full flex flex-col overflow-hidden",c.compact?"":"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl p-4 relative"])},[c.compact?f("",!0):(i(),l("div",Ot,[t[5]||(t[5]=o("div",{class:"flex items-center gap-2"},[o("span",{class:"text-xl"},"ğŸ³"),o("span",{class:"font-bold text-gray-700 dark:text-gray-200"},"Docker")],-1)),o("div",At,[o("button",{onClick:vt,class:"text-[10px] bg-gray-50 text-gray-600 px-2 py-1 rounded hover:bg-gray-100 transition-colors flex items-center",title:m.value?.isChecking?`æ­£åœ¨æ£€æµ‹: ${m.value.checkedCount} / ${m.value.totalCount||"?"}`:m.value?.lastCheck?`ä¸Šæ¬¡æ£€æµ‹: ${new Date(m.value.lastCheck).toLocaleString()}${m.value.failures?.length?`

æ£€æµ‹å¤±è´¥:
`+m.value.failures.map(e=>`- ${e.name}: ${e.error}`).join(`
`):""}`:R.value?"æ£€æµ‹é•œåƒæ›´æ–°":"è¯·å…ˆå¼€å¯è‡ªåŠ¨å‡çº§é•œåƒ",disabled:m.value?.isChecking||!R.value},[m.value?.isChecking?(i(),l("span",Et)):f("",!0),m.value?.isChecking?(i(),l("span",Rt,p(m.value.checkedCount)+"/"+p(m.value.totalCount||"?"),1)):m.value?.failures?.length?(i(),l("span",Ft,[...t[4]||(t[4]=[o("span",{class:"mr-1"},"âš ï¸",-1),o("span",null,"æŸ¥æ›´æ–°",-1)])])):(i(),l("span",Vt,p(m.value?.isChecking?"æ£€æµ‹ä¸­":"æŸ¥æ›´æ–°"),1))],8,Bt),o("button",{onClick:t[0]||(t[0]=()=>H(!1)),class:"text-[10px] bg-blue-50 text-blue-500 px-2 py-1 rounded hover:bg-blue-100 transition-colors",title:"ç‚¹å‡»è·å– Docker ä¿¡æ¯"},[D.value?(i(),l("span",jt)):f("",!0),B(" "+p(D.value?"åŠ è½½ä¸­":h.value&&h.value.includes("Docker not available")?"è¿æ¥":"åˆ·æ–°"),1)]),g.value.length?(i(),l("div",zt,p(g.value.filter(e=>e.State==="running").length)+" / "+p(g.value.length),1)):f("",!0)])])),h.value&&!g.value.length?(i(),l("div",Wt,[o("span",null,p(Z.value),1),o("button",{onClick:t[1]||(t[1]=()=>H(!1)),class:"px-3 py-1 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors text-xs"}," é‡æ–°æ£€æµ‹ ")])):!g.value.length&&!h.value?(i(),l("div",Gt,[t[6]||(t[6]=o("span",null,"ç‚¹å‡»åˆ·æ–°è·å–å®¹å™¨åˆ—è¡¨",-1)),o("button",{onClick:t[2]||(t[2]=()=>H(!1)),class:"px-3 py-1 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors text-xs"}," è·å–åˆ—è¡¨ ")])):(i(),l("div",Kt,[h.value?(i(),l("div",Jt,p(Z.value),1)):f("",!0),o("div",Yt,[o("div",qt,[o("div",Xt,[o("span",Zt,[t[7]||(t[7]=o("span",{class:"w-1.5 h-1.5 rounded-full bg-green-500"},null,-1)),B(" "+p(g.value.filter(e=>e.State==="running").length),1)]),o("span",Qt,[t[8]||(t[8]=o("span",{class:"w-1.5 h-1.5 rounded-full bg-gray-400"},null,-1)),B(" "+p(g.value.filter(e=>e.State!=="running").length),1)]),X.value>0?(i(),l("span",te,[t[9]||(t[9]=o("span",{class:"w-1.5 h-1.5 rounded-full bg-red-500"},null,-1)),B(" "+p(X.value),1)])):f("",!0)]),E.value?(i(),l("div",ee,[o("span",se,"IMG:"+p(E.value.Images),1)])):f("",!0)]),(i(!0),l(lt,null,it(g.value,e=>(i(),l("div",{key:e.Id,class:"flex flex-col gap-1 p-1.5 bg-white rounded-lg border border-black"},[o("div",ne,[o("div",oe,[o("div",{class:dt(["w-2 h-2 rounded-full shrink-0 mt-1",Mt(e.State)])},null,2),o("div",ae,[o("div",re,[o("span",{class:"font-medium text-sm truncate text-black",title:e.Names?.[0]||""},p((e.Names?.[0]||"").replace(/^\//,"")),9,le),e.hasUpdate?(i(),l("span",ie," å¯å‡çº§ ")):f("",!0)]),o("div",de,[o("span",{class:"text-[10px] text-black truncate min-w-0 flex-1",title:e.Image},p(e.Image),9,ce),o("button",{onClick:n=>It(e),class:"text-[10px] text-black hover:underline px-1 shrink-0",title:"æ·»åŠ å¤–ç½‘åœ°å€"}," æ·»åŠ å¤–ç½‘åœ°å€ ",8,ue)]),T.value===e.Id?(i(),l("div",pe,[Lt(o("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>O.value=n),type:"text",placeholder:"nas.example.com",class:"px-2 py-1 border border-gray-200 rounded text-[10px] focus:border-blue-500 outline-none w-36"},null,512),[[Nt,O.value]]),o("button",{onClick:n=>Ct(e),class:"text-[10px] text-green-600 hover:underline px-1",title:"ä¿å­˜"}," ä¿å­˜ ",8,ge),o("button",{onClick:St,class:"text-[10px] text-gray-500 hover:underline px-1",title:"å–æ¶ˆ"}," å–æ¶ˆ ")])):f("",!0)])]),o("div",me,[o("span",fe,p(e.Status),1),L(e).length?(i(),l("div",he,[(i(!0),l(lt,null,it(L(e).slice(0,2),(n,a)=>(i(),l("span",{key:a,class:"text-[9px] bg-blue-50 text-blue-500 px-1 rounded border border-blue-100"},p(n),1))),128)),L(e).length>2?(i(),l("span",ve,"+"+p(L(e).length-2),1)):f("",!0)])):f("",!0)])]),o("div",xe,[o("div",be,[o("div",ke,[t[10]||(t[10]=o("span",null,"CPU",-1)),e.stats?(i(),l("span",ye,p(e.stats.cpuPercent.toFixed(1))+"%",1)):(i(),l("span",we,"--"))]),o("div",Pe,[o("div",{class:"h-full bg-blue-500 rounded-full transition-all duration-500",style:ct({width:e.stats?Math.min(e.stats.cpuPercent,100)+"%":"0%"})},null,4)]),o("div",_e,[t[11]||(t[11]=o("span",null,"NET",-1)),e.stats&&e.stats.netIO?(i(),l("span",Ie," â†“"+p(S(e.stats.netIO.rx))+" â†‘"+p(S(e.stats.netIO.tx)),1)):(i(),l("span",Ce,"--"))])]),o("div",Se,[o("div",Me,[t[12]||(t[12]=o("span",null,"MEM",-1)),e.stats?(i(),l("span",De,p((e.stats.memUsage/1024/1024).toFixed(0))+"MB",1)):(i(),l("span",$e,"--"))]),o("div",Ue,[o("div",{class:"h-full bg-purple-500 rounded-full transition-all duration-500",style:ct({width:e.stats?Math.min(e.stats.memPercent,100)+"%":"0%"})},null,4)]),o("div",He,[t[13]||(t[13]=o("span",null,"I/O",-1)),e.stats&&e.stats.blockIO?(i(),l("span",Le," R"+p(S(e.stats.blockIO.read))+" W"+p(S(e.stats.blockIO.write)),1)):(i(),l("span",Ne,"--"))])])]),o("div",Te,[o("div",Oe,[e.State==="running"&&N(e)?(i(),l("button",{key:0,onClick:n=>wt(e),class:"px-2 py-1 hover:bg-gray-100 text-black rounded transition-colors text-xs flex items-center gap-1",title:"å†…ç½‘æ‰“å¼€"},[...t[14]||(t[14]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[o("path",{"fill-rule":"evenodd",d:"M15.75 2.25H21a.75.75 0 01.75.75v5.25a.75.75 0 01-1.5 0V4.81L8.03 17.03a.75.75 0 01-1.06-1.06L19.19 3.75h-3.44a.75.75 0 010-1.5zm-10.5 4.5a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h10.5a1.5 1.5 0 001.5-1.5V10.5a.75.75 0 011.5 0v8.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V8.25a3 3 0 013-3h8.25a.75.75 0 010 1.5H5.25z","clip-rule":"evenodd"})],-1),o("span",null,"å†…ç½‘æ‰“å¼€",-1)])],8,Ae)):f("",!0),e.State==="running"&&N(e)?(i(),l("button",{key:1,onClick:n=>Pt(e),class:"px-2 py-1 hover:bg-gray-100 text-black rounded transition-colors text-xs flex items-center gap-1",title:"å¤–ç½‘æ‰“å¼€"},[...t[15]||(t[15]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[o("path",{"fill-rule":"evenodd",d:"M3 4.5A1.5 1.5 0 014.5 3h9A1.5 1.5 0 0115 4.5V9a1.5 1.5 0 01-1.5 1.5H9.31l2.44 2.44a.75.75 0 11-1.06 1.06L7.5 10.31V12a1.5 1.5 0 01-1.5 1.5H1.5A1.5 1.5 0 010 12V4.5A1.5 1.5 0 011.5 3H3v1.5z","clip-rule":"evenodd"})],-1),o("span",null,"å¤–ç½‘æ‰“å¼€",-1)])],8,Be)):f("",!0),e.State==="running"?(i(),l("button",{key:2,onClick:n=>_t(e),class:"px-2 py-1 hover:bg-gray-100 text-black rounded transition-colors text-xs flex items-center gap-1",title:"æ·»åŠ åˆ°æ¡Œé¢"},[...t[16]||(t[16]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[o("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z","clip-rule":"evenodd"})],-1),o("span",null,"æ·»åŠ å¡ç‰‡",-1)])],8,Ee)):f("",!0),o("label",Re,[o("input",{type:"checkbox",class:"rounded text-blue-600 focus:ring-blue-500 w-3 h-3 cursor-pointer",checked:kt(e.Id),onChange:n=>yt(e.Id,n.target.checked)},null,40,Fe),t[17]||(t[17]=o("span",{class:"text-xs text-black"},"ç¦æ­¢è‡ªåŠ¨å‡çº§",-1))])]),o("div",Ve,[e.State!=="running"?(i(),l("button",{key:0,onClick:n=>W(e.Id,"start"),class:"p-1 hover:bg-green-100 text-green-600 rounded transition-colors",title:"å¯åŠ¨"},[...t[18]||(t[18]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[o("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z","clip-rule":"evenodd"})],-1)])],8,je)):f("",!0),e.State==="running"?(i(),l("button",{key:1,onClick:n=>W(e.Id,"stop"),class:"p-1 hover:bg-red-100 text-red-600 rounded transition-colors",title:"åœæ­¢"},[...t[19]||(t[19]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[o("path",{"fill-rule":"evenodd",d:"M4.5 7.5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-9a3 3 0 01-3-3v-9z","clip-rule":"evenodd"})],-1)])],8,ze)):f("",!0),o("button",{onClick:n=>W(e.Id,"restart"),class:"p-1 hover:bg-blue-100 text-blue-600 rounded transition-colors",title:"é‡å¯"},[...t[20]||(t[20]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[o("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.919z","clip-rule":"evenodd"})],-1)])],8,We)])])]))),128))])]))],2))}}),ts=Tt(qe,[["__scopeId","data-v-e5fb92d3"]]);export{ts as default};
