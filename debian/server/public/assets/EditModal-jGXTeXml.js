import{d as Se,u as Le,r as L,w as pe,o as bt,c as ie,a as wt,b as w,e as k,f as B,g as ae,h as o,t as D,F as ee,i as ue,j as ce,k as Z,T as kt,l as At,m as le,n as O,p as Ct,q as Et,_ as Qe,s as ge,v as It,x as $t,y as _,z as Te,A as U,B as se,C as Ae}from"./index-0Xhfa8Kb.js";import{_ as We}from"./IconUploader.vue_vue_type_script_setup_true_lang-ch-esQdk.js";const Mt={class:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-2xl max-h-[80vh] flex flex-col animate-in fade-in zoom-in duration-200"},Bt={class:"flex justify-between items-center mb-4"},_t={class:"text-lg font-bold text-gray-900 flex items-center gap-2"},Ft={key:0},St={key:1},Lt={class:"text-sm font-normal text-gray-500"},Ut={class:"text-sm text-orange-500 font-medium bg-orange-50 px-2 py-1 rounded-full flex items-center gap-1"},Dt={class:"flex-1 overflow-y-auto p-2 min-h-[200px]"},Rt={key:0,class:"mb-6"},jt={class:"grid grid-cols-4 sm:grid-cols-6 gap-4"},Vt=["onClick"],Ot={class:"w-12 h-12 flex items-center justify-center bg-white rounded-lg shadow-sm group-hover:scale-110 transition-transform"},Pt=["src"],zt=["title"],Nt={class:"grid grid-cols-4 sm:grid-cols-6 gap-4"},Tt=["onClick"],Wt={class:"w-12 h-12 flex items-center justify-center bg-white rounded-lg shadow-sm group-hover:scale-110 transition-transform"},Kt=["src"],Gt=["title"],Ht={key:1,class:"mt-4 flex justify-center"},Yt={class:"mt-6 flex justify-between items-center border-t pt-4"},Jt={key:1},Ce=100,Qt=Se({__name:"IconSelectionModal",props:{show:{type:Boolean},candidates:{},title:{},source:{}},emits:["update:show","select","cancelLink"],setup(n,{emit:e}){const s=n,l=e,i=Le(),c=L(10);let d=null;const f=()=>{clearInterval(d),c.value=10,d=setInterval(()=>{if(c.value--,c.value<=0&&(clearInterval(d),s.candidates.length>0)){const A=s.candidates[0];A&&h(A)}},1e3)},h=A=>{clearInterval(d),l("select",A),l("update:show",!1)};pe(()=>s.show,A=>{clearInterval(d),A&&f()},{immediate:!0}),bt(()=>clearInterval(d));const g=A=>{try{if(!A)return"";const E=A.split("/"),r=E[E.length-1];if(!r)return A;const F=r?.split(".")[0]||"";return decodeURIComponent(F)}catch{return A}},p=L(Ce),v=ie(()=>s.candidates.slice(0,p.value)),b=ie(()=>p.value<s.candidates.length),C=()=>{p.value+=Ce};pe(()=>[s.candidates,s.show],()=>{p.value=Ce});const I=["icons/douyin.svg"];return(A,E)=>(w(),wt(kt,{to:"body"},[n.show?(w(),k("div",{key:0,class:"fixed inset-0 z-[200] flex items-center justify-center bg-black/50 backdrop-blur-sm pointer-events-auto",onClick:E[2]||(E[2]=ae(r=>A.$emit("update:show",!1),["self"]))},[o("div",Mt,[o("div",Bt,[o("h3",_t,[n.source==="local"?(w(),k("span",Ft,"üìÅ Êú¨Âú∞ÂõæÊ†á")):(w(),k("span",St,"üåê ÁΩëÁªúÂõæÊ†á")),o("span",Lt,"("+D(n.candidates.length)+"‰∏™ÂåπÈÖç)",1)]),o("div",Ut,[E[3]||(E[3]=o("span",null,"‚è±Ô∏è",-1)),o("span",null,D(c.value)+"s ÂêéËá™Âä®ÈÄâÊã©",1)])]),o("div",Dt,[I.length>0&&n.source==="local"?(w(),k("div",Rt,[E[4]||(E[4]=o("h4",{class:"text-xs font-bold text-gray-400 mb-3 uppercase tracking-wider"},"Êé®ËçêÂõæÊ†á",-1)),o("div",jt,[(w(),k(ee,null,ue(I,r=>o("button",{key:r,onClick:F=>h(r),class:"group flex flex-col items-center gap-3 p-3 rounded-xl hover:bg-blue-50 transition-all border border-gray-100 hover:border-blue-200 hover:shadow-md"},[o("div",Ot,[o("img",{src:ce(i).getAssetUrl(r),class:"w-8 h-8 object-contain",loading:"lazy"},null,8,Pt)]),o("span",{class:"text-xs text-gray-600 truncate w-full text-center font-medium",title:g(r)},D(g(r)),9,zt)],8,Vt)),64))])])):B("",!0),o("div",Nt,[(w(!0),k(ee,null,ue(v.value,r=>(w(),k("button",{key:r,onClick:F=>h(r),class:"group flex flex-col items-center gap-3 p-3 rounded-xl hover:bg-blue-50 transition-all border border-gray-100 hover:border-blue-200 hover:shadow-md"},[o("div",Wt,[o("img",{src:ce(i).getAssetUrl(r),class:"w-8 h-8 object-contain",loading:"lazy"},null,8,Kt)]),o("span",{class:"text-xs text-gray-600 truncate w-full text-center font-medium",title:g(r)},D(g(r)),9,Gt)],8,Tt))),128))]),b.value?(w(),k("div",Ht,[o("button",{onClick:C,class:"px-4 py-2 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-full transition-colors"}," Âä†ËΩΩÊõ¥Â§ö ("+D(n.candidates.length-p.value)+" ‰∏™) ",1)])):B("",!0)]),o("div",Yt,[n.source==="api"?(w(),k("button",{key:0,onClick:E[0]||(E[0]=r=>A.$emit("cancelLink")),class:"px-4 py-2 rounded-lg text-red-500 hover:bg-red-50 font-medium transition-colors flex items-center gap-1"},[...E[5]||(E[5]=[o("span",null,"üîó",-1),Z(" ÂèñÊ∂àÈìæÊé• ",-1)])])):(w(),k("div",Jt)),o("button",{onClick:E[1]||(E[1]=r=>A.$emit("update:show",!1)),class:"px-6 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 font-medium transition-colors"}," ÂèñÊ∂à ")])])])):B("",!0)]))}}),Xt=["disabled"],Zt={class:"max-w-[100px] truncate"},qt={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-100 z-50 overflow-hidden origin-top-right"},es={class:"max-h-[320px] overflow-y-auto custom-scrollbar py-1.5"},ts=["onClick"],ss={class:"truncate"},ns={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor"},rs=Se({__name:"GroupSelector",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const s=n,l=e,i=Le(),c=L(!1),d=L(null);At(d,()=>{c.value=!1});const f=ie(()=>i.groups.find(p=>p.id===s.modelValue)),h=p=>{l("update:modelValue",p),c.value=!1},g=()=>{s.disabled||(c.value=!c.value)};return(p,v)=>(w(),k("div",{class:"relative",ref_key:"containerRef",ref:d},[o("button",{type:"button",onClick:g,class:O(["flex items-center gap-1 text-xs font-bold text-gray-600 hover:bg-gray-100 px-2 py-1.5 rounded-lg transition-colors border border-transparent hover:border-gray-200",{"opacity-50 cursor-not-allowed":n.disabled,"bg-gray-50 border-gray-200":c.value}]),disabled:n.disabled,title:"ÂàáÊç¢ÂàÜÁªÑ"},[o("span",Zt,D(f.value?.title||"ÈÄâÊã©ÂàÜÁªÑ"),1),(w(),k("svg",{xmlns:"http://www.w3.org/2000/svg",class:O(["w-3 h-3 transition-transform duration-200 text-gray-400",{"rotate-180":c.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[0]||(v[0]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],10,Xt),le(Ct,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform scale-95 opacity-0 -translate-y-2","enter-to-class":"transform scale-100 opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform scale-100 opacity-100 translate-y-0","leave-to-class":"transform scale-95 opacity-0 -translate-y-2"},{default:Et(()=>[c.value?(w(),k("div",qt,[o("div",es,[(w(!0),k(ee,null,ue(ce(i).groups,b=>(w(),k("button",{key:b.id,onClick:C=>h(b.id),class:O(["w-full text-left px-4 py-2 text-xs hover:bg-gray-50 transition-colors flex items-center justify-between group",n.modelValue===b.id?"text-blue-600 font-bold bg-blue-50/50":"text-gray-600"])},[o("span",ss,D(b.title),1),n.modelValue===b.id?(w(),k("svg",ns,[...v[1]||(v[1]=[o("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):B("",!0)],10,ts))),128))])])):B("",!0)]),_:1})],512))}}),os=Qe(rs,[["__scopeId","data-v-0f95d5bc"]]);function K(n){return Array.isArray?Array.isArray(n):qe(n)==="[object Array]"}function as(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function ls(n){return n==null?"":as(n)}function N(n){return typeof n=="string"}function Xe(n){return typeof n=="number"}function is(n){return n===!0||n===!1||us(n)&&qe(n)=="[object Boolean]"}function Ze(n){return typeof n=="object"}function us(n){return Ze(n)&&n!==null}function j(n){return n!=null}function Ee(n){return!n.trim().length}function qe(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const cs="Incorrect 'index' type",ds=n=>`Invalid value for key ${n}`,hs=n=>`Pattern length exceeds max of ${n}.`,gs=n=>`Missing ${n} property in key`,fs=n=>`Property 'weight' in key '${n}' must be a positive integer`,Ke=Object.prototype.hasOwnProperty;class ps{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(l=>{let i=et(l);this._keys.push(i),this._keyMap[i.id]=i,s+=i.weight}),this._keys.forEach(l=>{l.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function et(n){let e=null,s=null,l=null,i=1,c=null;if(N(n)||K(n))l=n,e=Ge(n),s=Ie(n);else{if(!Ke.call(n,"name"))throw new Error(gs("name"));const d=n.name;if(l=d,Ke.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(fs(d));e=Ge(d),s=Ie(d),c=n.getFn}return{path:e,id:s,weight:i,src:l,getFn:c}}function Ge(n){return K(n)?n:n.split(".")}function Ie(n){return K(n)?n.join("."):n}function ms(n,e){let s=[],l=!1;const i=(c,d,f)=>{if(j(c))if(!d[f])s.push(c);else{let h=d[f];const g=c[h];if(!j(g))return;if(f===d.length-1&&(N(g)||Xe(g)||is(g)))s.push(ls(g));else if(K(g)){l=!0;for(let p=0,v=g.length;p<v;p+=1)i(g[p],d,f+1)}else d.length&&i(g,d,f+1)}};return i(n,N(e)?e.split("."):e,0),l?s:s[0]}const vs={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ys={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},xs={location:0,threshold:.6,distance:100},bs={useExtendedSearch:!1,getFn:ms,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var x={...ys,...vs,...xs,...bs};const ws=/[^ ]+/g;function ks(n=1,e=3){const s=new Map,l=Math.pow(10,e);return{get(i){const c=i.match(ws).length;if(s.has(c))return s.get(c);const d=1/Math.pow(c,.5*n),f=parseFloat(Math.round(d*l)/l);return s.set(c,f),f},clear(){s.clear()}}}class Ue{constructor({getFn:e=x.getFn,fieldNormWeight:s=x.fieldNormWeight}={}){this.norm=ks(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,l)=>{this._keysMap[s.id]=l})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,N(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();N(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,l=this.size();s<l;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!j(e)||Ee(e))return;let l={v:e,i:s,n:this.norm.get(e)};this.records.push(l)}_addObject(e,s){let l={i:s,$:{}};this.keys.forEach((i,c)=>{let d=i.getFn?i.getFn(e):this.getFn(e,i.path);if(j(d)){if(K(d)){let f=[];const h=[{nestedArrIndex:-1,value:d}];for(;h.length;){const{nestedArrIndex:g,value:p}=h.pop();if(j(p))if(N(p)&&!Ee(p)){let v={v:p,i:g,n:this.norm.get(p)};f.push(v)}else K(p)&&p.forEach((v,b)=>{h.push({nestedArrIndex:b,value:v})})}l.$[c]=f}else if(N(d)&&!Ee(d)){let f={v:d,n:this.norm.get(d)};l.$[c]=f}}}),this.records.push(l)}toJSON(){return{keys:this.keys,records:this.records}}}function tt(n,e,{getFn:s=x.getFn,fieldNormWeight:l=x.fieldNormWeight}={}){const i=new Ue({getFn:s,fieldNormWeight:l});return i.setKeys(n.map(et)),i.setSources(e),i.create(),i}function As(n,{getFn:e=x.getFn,fieldNormWeight:s=x.fieldNormWeight}={}){const{keys:l,records:i}=n,c=new Ue({getFn:e,fieldNormWeight:s});return c.setKeys(l),c.setIndexRecords(i),c}function fe(n,{errors:e=0,currentLocation:s=0,expectedLocation:l=0,distance:i=x.distance,ignoreLocation:c=x.ignoreLocation}={}){const d=e/n.length;if(c)return d;const f=Math.abs(l-s);return i?d+f/i:f?1:d}function Cs(n=[],e=x.minMatchCharLength){let s=[],l=-1,i=-1,c=0;for(let d=n.length;c<d;c+=1){let f=n[c];f&&l===-1?l=c:!f&&l!==-1&&(i=c-1,i-l+1>=e&&s.push([l,i]),l=-1)}return n[c-1]&&c-l>=e&&s.push([l,c-1]),s}const q=32;function Es(n,e,s,{location:l=x.location,distance:i=x.distance,threshold:c=x.threshold,findAllMatches:d=x.findAllMatches,minMatchCharLength:f=x.minMatchCharLength,includeMatches:h=x.includeMatches,ignoreLocation:g=x.ignoreLocation}={}){if(e.length>q)throw new Error(hs(q));const p=e.length,v=n.length,b=Math.max(0,Math.min(l,v));let C=c,I=b;const A=f>1||h,E=A?Array(v):[];let r;for(;(r=n.indexOf(e,I))>-1;){let S=fe(e,{currentLocation:r,expectedLocation:b,distance:i,ignoreLocation:g});if(C=Math.min(S,C),I=r+p,A){let z=0;for(;z<p;)E[r+z]=1,z+=1}}I=-1;let F=[],T=1,P=p+v;const ye=1<<p-1;for(let S=0;S<p;S+=1){let z=0,V=P;for(;z<V;)fe(e,{errors:S,currentLocation:b+V,expectedLocation:b,distance:i,ignoreLocation:g})<=C?z=V:P=V,V=Math.floor((P-z)/2+z);P=V;let re=Math.max(1,b-V+1),J=d?v:Math.min(b+V,v)+p,G=Array(J+2);G[J+1]=(1<<S)-1;for(let R=J;R>=re;R-=1){let te=R-1,de=s[n.charAt(te)];if(A&&(E[te]=+!!de),G[R]=(G[R+1]<<1|1)&de,S&&(G[R]|=(F[R+1]|F[R])<<1|1|F[R+1]),G[R]&ye&&(T=fe(e,{errors:S,currentLocation:te,expectedLocation:b,distance:i,ignoreLocation:g}),T<=C)){if(C=T,I=te,I<=b)break;re=Math.max(1,2*b-I)}}if(fe(e,{errors:S+1,currentLocation:b,expectedLocation:b,distance:i,ignoreLocation:g})>C)break;F=G}const ne={isMatch:I>=0,score:Math.max(.001,T)};if(A){const S=Cs(E,f);S.length?h&&(ne.indices=S):ne.isMatch=!1}return ne}function Is(n){let e={};for(let s=0,l=n.length;s<l;s+=1){const i=n.charAt(s);e[i]=(e[i]||0)|1<<l-s-1}return e}const me=String.prototype.normalize?(n=>n.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(n=>n);class st{constructor(e,{location:s=x.location,threshold:l=x.threshold,distance:i=x.distance,includeMatches:c=x.includeMatches,findAllMatches:d=x.findAllMatches,minMatchCharLength:f=x.minMatchCharLength,isCaseSensitive:h=x.isCaseSensitive,ignoreDiacritics:g=x.ignoreDiacritics,ignoreLocation:p=x.ignoreLocation}={}){if(this.options={location:s,threshold:l,distance:i,includeMatches:c,findAllMatches:d,minMatchCharLength:f,isCaseSensitive:h,ignoreDiacritics:g,ignoreLocation:p},e=h?e:e.toLowerCase(),e=g?me(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const v=(C,I)=>{this.chunks.push({pattern:C,alphabet:Is(C),startIndex:I})},b=this.pattern.length;if(b>q){let C=0;const I=b%q,A=b-I;for(;C<A;)v(this.pattern.substr(C,q),C),C+=q;if(I){const E=b-q;v(this.pattern.substr(E),E)}}else v(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,ignoreDiacritics:l,includeMatches:i}=this.options;if(e=s?e:e.toLowerCase(),e=l?me(e):e,this.pattern===e){let A={isMatch:!0,score:0};return i&&(A.indices=[[0,e.length-1]]),A}const{location:c,distance:d,threshold:f,findAllMatches:h,minMatchCharLength:g,ignoreLocation:p}=this.options;let v=[],b=0,C=!1;this.chunks.forEach(({pattern:A,alphabet:E,startIndex:r})=>{const{isMatch:F,score:T,indices:P}=Es(e,A,E,{location:c+r,distance:d,threshold:f,findAllMatches:h,minMatchCharLength:g,includeMatches:i,ignoreLocation:p});F&&(C=!0),b+=T,F&&P&&(v=[...v,...P])});let I={isMatch:C,score:C?b/this.chunks.length:1};return C&&i&&(I.indices=v),I}}class Y{constructor(e){this.pattern=e}static isMultiMatch(e){return He(e,this.multiRegex)}static isSingleMatch(e){return He(e,this.singleRegex)}search(){}}function He(n,e){const s=n.match(e);return s?s[1]:null}class $s extends Y{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Ms extends Y{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const l=e.indexOf(this.pattern)===-1;return{isMatch:l,score:l?0:1,indices:[0,e.length-1]}}}class Bs extends Y{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class _s extends Y{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Fs extends Y{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Ss extends Y{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class nt extends Y{constructor(e,{location:s=x.location,threshold:l=x.threshold,distance:i=x.distance,includeMatches:c=x.includeMatches,findAllMatches:d=x.findAllMatches,minMatchCharLength:f=x.minMatchCharLength,isCaseSensitive:h=x.isCaseSensitive,ignoreDiacritics:g=x.ignoreDiacritics,ignoreLocation:p=x.ignoreLocation}={}){super(e),this._bitapSearch=new st(e,{location:s,threshold:l,distance:i,includeMatches:c,findAllMatches:d,minMatchCharLength:f,isCaseSensitive:h,ignoreDiacritics:g,ignoreLocation:p})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class rt extends Y{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,l;const i=[],c=this.pattern.length;for(;(l=e.indexOf(this.pattern,s))>-1;)s=l+c,i.push([l,s-1]);const d=!!i.length;return{isMatch:d,score:d?0:1,indices:i}}}const $e=[$s,rt,Bs,_s,Ss,Fs,Ms,nt],Ye=$e.length,Ls=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Us="|";function Ds(n,e={}){return n.split(Us).map(s=>{let l=s.trim().split(Ls).filter(c=>c&&!!c.trim()),i=[];for(let c=0,d=l.length;c<d;c+=1){const f=l[c];let h=!1,g=-1;for(;!h&&++g<Ye;){const p=$e[g];let v=p.isMultiMatch(f);v&&(i.push(new p(v,e)),h=!0)}if(!h)for(g=-1;++g<Ye;){const p=$e[g];let v=p.isSingleMatch(f);if(v){i.push(new p(v,e));break}}}return i})}const Rs=new Set([nt.type,rt.type]);class js{constructor(e,{isCaseSensitive:s=x.isCaseSensitive,ignoreDiacritics:l=x.ignoreDiacritics,includeMatches:i=x.includeMatches,minMatchCharLength:c=x.minMatchCharLength,ignoreLocation:d=x.ignoreLocation,findAllMatches:f=x.findAllMatches,location:h=x.location,threshold:g=x.threshold,distance:p=x.distance}={}){this.query=null,this.options={isCaseSensitive:s,ignoreDiacritics:l,includeMatches:i,minMatchCharLength:c,findAllMatches:f,ignoreLocation:d,location:h,threshold:g,distance:p},e=s?e:e.toLowerCase(),e=l?me(e):e,this.pattern=e,this.query=Ds(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:l,isCaseSensitive:i,ignoreDiacritics:c}=this.options;e=i?e:e.toLowerCase(),e=c?me(e):e;let d=0,f=[],h=0;for(let g=0,p=s.length;g<p;g+=1){const v=s[g];f.length=0,d=0;for(let b=0,C=v.length;b<C;b+=1){const I=v[b],{isMatch:A,indices:E,score:r}=I.search(e);if(A){if(d+=1,h+=r,l){const F=I.constructor.type;Rs.has(F)?f=[...f,...E]:f.push(E)}}else{h=0,d=0,f.length=0;break}}if(d){let b={isMatch:!0,score:h/d};return l&&(b.indices=f),b}}return{isMatch:!1,score:1}}}const Me=[];function Vs(...n){Me.push(...n)}function Be(n,e){for(let s=0,l=Me.length;s<l;s+=1){let i=Me[s];if(i.condition(n,e))return new i(n,e)}return new st(n,e)}const ve={AND:"$and",OR:"$or"},_e={PATH:"$path",PATTERN:"$val"},Fe=n=>!!(n[ve.AND]||n[ve.OR]),Os=n=>!!n[_e.PATH],Ps=n=>!K(n)&&Ze(n)&&!Fe(n),Je=n=>({[ve.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function ot(n,e,{auto:s=!0}={}){const l=i=>{let c=Object.keys(i);const d=Os(i);if(!d&&c.length>1&&!Fe(i))return l(Je(i));if(Ps(i)){const h=d?i[_e.PATH]:c[0],g=d?i[_e.PATTERN]:i[h];if(!N(g))throw new Error(ds(h));const p={keyId:Ie(h),pattern:g};return s&&(p.searcher=Be(g,e)),p}let f={children:[],operator:c[0]};return c.forEach(h=>{const g=i[h];K(g)&&g.forEach(p=>{f.children.push(l(p))})}),f};return Fe(n)||(n=Je(n)),l(n)}function zs(n,{ignoreFieldNorm:e=x.ignoreFieldNorm}){n.forEach(s=>{let l=1;s.matches.forEach(({key:i,norm:c,score:d})=>{const f=i?i.weight:null;l*=Math.pow(d===0&&f?Number.EPSILON:d,(f||1)*(e?1:c))}),s.score=l})}function Ns(n,e){const s=n.matches;e.matches=[],j(s)&&s.forEach(l=>{if(!j(l.indices)||!l.indices.length)return;const{indices:i,value:c}=l;let d={indices:i,value:c};l.key&&(d.key=l.key.src),l.idx>-1&&(d.refIndex=l.idx),e.matches.push(d)})}function Ts(n,e){e.score=n.score}function Ws(n,e,{includeMatches:s=x.includeMatches,includeScore:l=x.includeScore}={}){const i=[];return s&&i.push(Ns),l&&i.push(Ts),n.map(c=>{const{idx:d}=c,f={item:e[d],refIndex:d};return i.length&&i.forEach(h=>{h(c,f)}),f})}class W{constructor(e,s={},l){this.options={...x,...s},this.options.useExtendedSearch,this._keyStore=new ps(this.options.keys),this.setCollection(e,l)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof Ue))throw new Error(cs);this._myIndex=s||tt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){j(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let l=0,i=this._docs.length;l<i;l+=1){const c=this._docs[l];e(c,l)&&(this.removeAt(l),l-=1,i-=1,s.push(c))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:l,includeScore:i,shouldSort:c,sortFn:d,ignoreFieldNorm:f}=this.options;let h=N(e)?N(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return zs(h,{ignoreFieldNorm:f}),c&&h.sort(d),Xe(s)&&s>-1&&(h=h.slice(0,s)),Ws(h,this._docs,{includeMatches:l,includeScore:i})}_searchStringList(e){const s=Be(e,this.options),{records:l}=this._myIndex,i=[];return l.forEach(({v:c,i:d,n:f})=>{if(!j(c))return;const{isMatch:h,score:g,indices:p}=s.searchIn(c);h&&i.push({item:c,idx:d,matches:[{score:g,value:c,norm:f,indices:p}]})}),i}_searchLogical(e){const s=ot(e,this.options),l=(f,h,g)=>{if(!f.children){const{keyId:v,searcher:b}=f,C=this._findMatches({key:this._keyStore.get(v),value:this._myIndex.getValueForItemAtKeyId(h,v),searcher:b});return C&&C.length?[{idx:g,item:h,matches:C}]:[]}const p=[];for(let v=0,b=f.children.length;v<b;v+=1){const C=f.children[v],I=l(C,h,g);if(I.length)p.push(...I);else if(f.operator===ve.AND)return[]}return p},i=this._myIndex.records,c={},d=[];return i.forEach(({$:f,i:h})=>{if(j(f)){let g=l(s,f,h);g.length&&(c[h]||(c[h]={idx:h,item:f,matches:[]},d.push(c[h])),g.forEach(({matches:p})=>{c[h].matches.push(...p)}))}}),d}_searchObjectList(e){const s=Be(e,this.options),{keys:l,records:i}=this._myIndex,c=[];return i.forEach(({$:d,i:f})=>{if(!j(d))return;let h=[];l.forEach((g,p)=>{h.push(...this._findMatches({key:g,value:d[p],searcher:s}))}),h.length&&c.push({idx:f,item:d,matches:h})}),c}_findMatches({key:e,value:s,searcher:l}){if(!j(s))return[];let i=[];if(K(s))s.forEach(({v:c,i:d,n:f})=>{if(!j(c))return;const{isMatch:h,score:g,indices:p}=l.searchIn(c);h&&i.push({score:g,key:e,value:c,idx:d,norm:f,indices:p})});else{const{v:c,n:d}=s,{isMatch:f,score:h,indices:g}=l.searchIn(c);f&&i.push({score:h,key:e,value:c,norm:d,indices:g})}return i}}W.version="7.1.0";W.createIndex=tt;W.parseIndex=As;W.config=x;W.parseQuery=ot;Vs(js);const Ks={key:0,class:"fixed inset-0 z-50 pointer-events-none"},Gs={class:"text-lg font-bold text-gray-800"},Hs={class:"flex items-center gap-2 ml-auto mr-4"},Ys={class:"relative inline-flex items-center cursor-pointer"},Js={class:"p-6 space-y-5 max-h-[70vh] overflow-y-auto"},Qs={class:"flex gap-3"},Xs={class:"flex-1"},Zs={class:"relative"},qs={class:"flex items-center h-[42px] px-2 border border-gray-200 rounded-lg bg-white"},en={key:0},tn={class:"relative"},sn={key:0,class:"space-y-2 mt-2"},nn={class:"relative flex-1 w-full sm:w-auto"},rn=["onUpdate:modelValue"],on=["onClick"],an={class:"relative flex-[2] w-full sm:w-auto"},ln=["onUpdate:modelValue"],un=["onClick"],cn=["onClick"],dn={key:0,class:"space-y-2 mt-2"},hn={class:"relative flex-1 w-full sm:w-auto"},gn=["onUpdate:modelValue"],fn=["onClick"],pn={class:"relative flex-[2] w-full sm:w-auto"},mn=["onUpdate:modelValue"],vn=["onClick"],yn=["onClick"],xn={class:"flex items-start justify-between gap-4 mb-3"},bn={class:"flex-1"},wn={class:"flex items-center gap-4 mb-2"},kn={class:"flex bg-gray-100 p-0.5 rounded-lg text-xs"},An={key:0,class:"flex items-center gap-2 text-xs text-gray-600 mb-2 select-none"},Cn={class:"flex justify-start items-center gap-2"},En=["disabled"],In={key:0,class:"w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"},$n=["disabled"],Mn={key:0,class:"w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"},Bn={class:"shrink-0 w-16 h-16 rounded-xl border bg-gray-50 flex items-center justify-center overflow-hidden shadow-sm"},_n=["src"],Fn={key:1,class:"text-gray-300 text-xs"},Sn={key:1,class:"text-gray-300 text-xs"},Ln={key:0,class:"relative animate-fade-in"},Un={key:1,class:"space-y-3 animate-fade-in"},Dn={class:"relative"},Rn={class:"flex items-center gap-2 bg-gray-50 px-2 py-1.5 rounded-lg border border-gray-100 mt-3"},jn={class:"text-xs text-gray-500 w-8 text-right"},Vn={class:"pt-4 border-t border-gray-100"},On={class:"space-y-3"},Pn={class:"flex items-center gap-2"},zn={key:0,class:"grid grid-cols-2 gap-4 mt-2 p-3 bg-gray-50 rounded-lg"},Nn={class:"block text-xs text-gray-500 mb-1 flex justify-between"},Tn={class:"block text-xs text-gray-500 mb-1 flex justify-between"},Wn={class:"col-span-2 text-right"},Kn={class:"px-6 py-4 bg-white flex justify-end gap-3 border-t border-gray-100"},Gn=["disabled"],Hn=Se({__name:"EditModal",props:{show:{type:Boolean},data:{},groupId:{}},emits:["update:show","save"],setup(n,{emit:e}){const s=n,l=e,i=Le(),c=ie(()=>((s.groupId?i.groups.find(t=>t.id===s.groupId)?.cardLayout:void 0)||i.appConfig.cardLayout)==="vertical"),d=ie({get:()=>{const u=r.value.description1||"",t=r.value.description2||"",a=r.value.description3||"";return a?`${u}
${t}
${a}`:t?`${u}
${t}`:u},set:u=>{const t=u.split(`
`);r.value.description1=t[0]||"",r.value.description2=t[1]||"",r.value.description3=t[2]||""}}),f=u=>{const t=u.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"},h=L("image"),g=L(!1),p=L(!1),v=ge([]),b=L("local"),C=ge([]),I=ge(null),A=ge(null),E=L(""),r=L({title:"",url:"",lanUrl:"",backupUrls:[],backupLanUrls:[],icon:"",description1:"",description2:"",description3:"",color:"bg-gray-100 text-gray-700",titleColor:"",isPublic:!1,backgroundImage:"",backgroundBlur:6,backgroundMask:.3,iconSize:100}),F=["üè†","üîç","üíª","üì±","üì∏","üéµ","üé¨","üìö","üõ†Ô∏è","‚òÅÔ∏è","‚ö°","üî•","üåü","‚ù§Ô∏è","üöÄ","üåç","üé®","üìÇ","üìÖ","üõí","üéÅ","üê±","üê∂","üçÄ","‚öΩ"],T=()=>{const u=Math.floor(Math.random()*F.length);r.value.icon=F[u]||""},P=u=>new Promise(t=>{const a=new Image,y=setTimeout(()=>t(!1),3e3);a.onload=()=>{clearTimeout(y),t(a.width>1)},a.onerror=()=>{clearTimeout(y),t(!1)},a.src=u}),ye=async()=>{if(!(C.value.length>0))try{const u=await fetch("/api/icons");if(u.ok){const t=await u.json();C.value=t.map(a=>`icons/${a}`)}}catch(u){console.error("Failed to fetch local icons",u)}},ne=async()=>{if(!I.value)try{const u=await fetch("https://api.iconify.design/collection?prefix=simple-icons");if(u.ok){const t=await u.json();t.uncategorized&&Array.isArray(t.uncategorized)&&(I.value=t.uncategorized.map(a=>({title:a,slug:a})))}}catch(u){console.error("Failed to fetch simple-icons data",u)}},S=["https://icon-manager.1851365c.er.aliyun-esa.net","https://icon-manager2.1851365c.er.aliyun-esa.net","http://icon-manager3.1851365c.er.aliyun-esa.net"],z=(u,t)=>u.map(a=>{const y=typeof a.url=="string"?a.url.trim():"",m=typeof a.downloadUrl=="string"?a.downloadUrl.trim():"";if(m){if(/^https?:\/\//i.test(m)||m.startsWith("//")||m.startsWith("data:"))return{...a,downloadUrl:m};try{return{...a,downloadUrl:new URL(m,t).href}}catch{return{...a,downloadUrl:""}}}if(/^https?:\/\//i.test(y)||y.startsWith("//")||y.startsWith("data:"))return{...a,downloadUrl:y};try{return{...a,downloadUrl:new URL(y||"",t).href}}catch{return{...a,downloadUrl:""}}}),V=u=>{const t=typeof u.downloadUrl=="string"?u.downloadUrl.trim():"";if(t){if(/^https?:\/\//i.test(t)||t.startsWith("//")||t.startsWith("data:"))return t;try{return new URL(t,S[0]).href}catch{return""}}const a=typeof u.url=="string"?u.url.trim():"";if(!a)return"";if(/^https?:\/\//i.test(a)||a.startsWith("//")||a.startsWith("data:"))return a;try{return new URL(a,S[0]).href}catch{return""}},re=async()=>{if(!A.value)try{const u=await fetch("/api/ali-icons");if(u.ok){const t=await u.json();A.value=Array.isArray(t)?t:null}else throw new Error("Proxy failed")}catch(u){console.warn("Proxy fetch failed, trying direct fetch...",u);try{const t=await Promise.allSettled(S.map(async m=>{const $=await fetch(`${m}/icons.json`);if(!$.ok)throw new Error(`Fetch failed: ${m}`);const H=await $.json();if(!Array.isArray(H))throw new Error(`Invalid icons.json: ${m}`);return z(H,m)})),a=[],y=new Set;for(const m of t)if(m.status==="fulfilled")for(const $ of m.value){const H=$.downloadUrl||`${$.name}|${$.url}|${$.filename}`;y.has(H)||(y.add(H),a.push($))}A.value=a.length>0?a:null}catch(t){console.error("Failed to fetch ali-icons data",t)}}},J=u=>{try{let a=new URL(u).hostname.toLowerCase().replace(/^www\./,"");const y=[".com.cn",".net.cn",".org.cn",".gov.cn",".edu.cn",".co.uk",".co.jp",".co.kr",".com",".cn",".net",".org",".io",".me",".cc",".info",".biz",".tv",".top",".xyz",".edu",".gov",".mil",".int"];for(const m of y)if(a.endsWith(m)){a=a.slice(0,-m.length);break}if(a.includes(".")){const m=a.split(".");return m[m.length-1]||""}return a}catch{return""}},G=async()=>{let u="";const t=r.value.url||r.value.lanUrl;if(t&&(u=J(t)),u||(u=r.value.title.trim()),!u)return alert("ËØ∑ÂÖàÂ°´ÂÜôÈìæÊé•ÊàñÊ†áÈ¢ò‰Ωú‰∏∫ÊêúÁ¥¢ÂÖ≥ÈîÆËØçÔºÅ");g.value=!0,h.value="image";try{console.log(`[Search] Starting Phase 1 (Local) for: "${u}"`),await ye();const a=C.value.map(Q=>{const X=Q.split("/"),M=X[X.length-1],oe=M?M.split(".")[0]:"";return{path:Q,name:oe}}),$=new W(a,{keys:["name"],threshold:.3,ignoreLocation:!0}).search(u).map(Q=>Q.item.path);if(console.log(`[Search] Phase 1 found ${$.length} matches`),$.length>0){$.length===1?(console.log(`[Search] Auto-selecting single local match: ${$[0]}`),r.value.icon=$[0]||""):(console.log(`[Search] Showing selection modal for ${$.length} local matches`),v.value=$,b.value="local",p.value=!0);return}if(console.log(`[Search] Phase 1 failed. Starting Phase 2 (API) for: "${u}"`),await ne(),I.value){const M=new W(I.value,{keys:["title","slug"],threshold:.3,ignoreLocation:!0}).search(u).map(oe=>`https://cdn.simpleicons.org/${oe.item.slug}`);if(console.log(`[Search] Phase 2 found ${M.length} matches`),M.length>0){M.length===1?(console.log(`[Search] Auto-selecting single API match: ${M[0]}`),r.value.icon=M[0]||""):(console.log(`[Search] Showing selection modal for ${M.length} API matches`),v.value=M,b.value="api",p.value=!0);return}}if(console.log(`[Search] Phase 2 failed. Starting Phase 3 (AliYun) for: "${u}"`),await re(),A.value){const M=new W(A.value,{keys:["name","cnName","domain"],threshold:.3,ignoreLocation:!0}).search(u).map(oe=>V(oe.item)).filter(Boolean);if(console.log(`[Search] Phase 3 found ${M.length} matches`),M.length>0){M.length===1?(console.log(`[Search] Auto-selecting single Ali match: ${M[0]}`),r.value.icon=M[0]||""):(console.log(`[Search] Showing selection modal for ${M.length} Ali matches`),v.value=M,b.value="api",p.value=!0);return}}const H=r.value.url||r.value.lanUrl;if(H){const X=(new URL(H).hostname.replace(/^www\./,"").split(".")[0]||"").toLowerCase();if(X){const M=`https://cdn.simpleicons.org/${X}`;if(await P(M)){r.value.icon=M;return}}}alert("Êú™ÊâæÂà∞ÈÄÇÈÖçÁöÑÂõæÊ†áÔºåÂ∞ùËØï‰ΩøÁî®Ëá™Âä®ÊäìÂèñÂäüËÉΩÔºü")}catch(a){console.error(a),alert("ÊêúÁ¥¢Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªú")}finally{g.value=!1}},De=async()=>{let u=r.value.title.trim();if(!u){const t=r.value.url||r.value.lanUrl;t&&(u=J(t))}if(!u){const t=r.value.icon?r.value.icon.trim():"";t&&!t.startsWith("http")&&!t.startsWith("/")&&!t.startsWith("data:")&&(u=t)}if(!u)return alert("ËØ∑ËæìÂÖ•Ê†áÈ¢òÊàñÈìæÊé•ÂêéÈáçËØïÔºÅ");await R(u)},R=async u=>{g.value=!0,h.value="image";try{if(console.log(`[Search] Searching AliYun for: "${u}"`),await re(),A.value){const y=new W(A.value,{keys:["name","cnName","domain"],threshold:.3,ignoreLocation:!0}).search(u).map(m=>V(m.item)).filter(Boolean);console.log(`[Search] Found ${y.length} matches`),y.length>0?y.length===1?r.value.icon=y[0]||"":(v.value=y,b.value="api",p.value=!0):alert("Êú™ÊâæÂà∞ÂåπÈÖçÁöÑÁΩëÁªúÂõæÊ†á")}else alert("Ëé∑ÂèñÂõæÊ†áÂ∫ìÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªú")}catch(t){console.error(t),alert("ÊêúÁ¥¢Â§±Ë¥•")}finally{g.value=!1}},te=()=>{const u=r.value.url||r.value.lanUrl;if(!u)return alert("ËØ∑ÂÖàÂ°´ÂÜôÈìæÊé•ÔºÅ");const t=J(u);if(!t)return alert("Êó†Ê≥ï‰ªéÈìæÊé•ÊèêÂèñÊúâÊïàÂÖ≥ÈîÆËØç");R(t)},de=u=>{r.value.icon=u},at=async u=>{try{const t=await fetch(`/api/get-icon-base64?url=${encodeURIComponent(u)}`);if(t.ok){const a=await t.json();if(a.success&&a.icon)return a.icon}}catch(t){console.warn("Failed to fetch base64 icon",t)}return null},lt=async()=>{const u=r.value.url||r.value.lanUrl;if(!u)return alert("ËØ∑ÂÖàÂ°´ÂÜôÈìæÊé•ÔºÅ");g.value=!0,h.value="image";try{const t=new URL(u),a=[`https://www.favicon.vip/get.php?url=${encodeURIComponent(u)}`,`https://icon.bqb.cool?url=${encodeURIComponent(u)}`,`https://api.afmax.cn/so/ico/index.php?r=${encodeURIComponent(u)}`,`https://api.quickso.cn/api/favicon/index.php?url=${encodeURIComponent(u)}`,`${t.origin}/favicon.ico`];let y=!1;for(const m of a){const $=await at(m);if($){r.value.icon=$,y=!0;break}if(await P(m)){r.value.icon=m,y=!0;break}}y||(T(),h.value="emoji")}catch{alert("ÈìæÊé•Ê†ºÂºèÈîôËØØÔºåÊó†Ê≥ïÊäìÂèñ"),g.value=!1}finally{g.value=!1}};pe(()=>s.show,u=>{if(u)if(E.value=s.groupId||"",s.data){r.value={...s.data,backupUrls:s.data.backupUrls?s.data.backupUrls.map(y=>typeof y=="string"?{name:"",url:y}:{...y}):[],backupLanUrls:s.data.backupLanUrls?s.data.backupLanUrls.map(y=>typeof y=="string"?{name:"",url:y}:{...y}):[],description1:s.data.description1||"",description2:s.data.description2||"",description3:s.data.description3||"",titleColor:s.data.titleColor||"",backgroundImage:s.data.backgroundImage||"",backgroundBlur:s.data.backgroundBlur??6,backgroundMask:s.data.backgroundMask??.3,iconSize:s.data.iconSize??100};const t=r.value.icon||"",a=t.length>0&&(t.length>4||t.includes("/")||t.includes(".")||t.includes(":")||t.startsWith("data:"));h.value=a?"image":"emoji",t||(h.value="image")}else r.value={title:"",url:"",lanUrl:"",backupUrls:[],backupLanUrls:[],icon:"",color:"bg-gray-100 text-gray-700",titleColor:"",isPublic:!1,backgroundImage:"",backgroundBlur:6,backgroundMask:.3,iconSize:100},h.value="image"},{immediate:!0});const it=()=>{r.value.backupUrls||(r.value.backupUrls=[]),r.value.backupUrls.push({name:"",url:""})},ut=u=>{r.value.backupUrls&&r.value.backupUrls.splice(u,1)},ct=()=>{r.value.backupLanUrls||(r.value.backupLanUrls=[]),r.value.backupLanUrls.push({name:"",url:""})},dt=u=>{r.value.backupLanUrls&&r.value.backupLanUrls.splice(u,1)},Re=u=>u?/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(u):!0,je=u=>{const t=u.target,a=t.parentElement?.parentElement;if(a){const y=a.querySelectorAll("input");y.length>1&&y[0]===t&&y[1]&&(y[1].focus(),u.preventDefault())}},xe=()=>l("update:show",!1),be=L(!1),we=L(!1),Ve=()=>{const u=r.value.icon;if(u&&u.startsWith("http")&&!u.includes("favicon.ico")&&!u.includes("api.uomg.com")&&!u.includes("simpleicons.org")&&!u.includes("api.afmax.cn")&&!u.includes("api.quickso.cn")&&!u.includes("favicon.vip")&&!u.includes("icon.bqb.cool")){console.log("Icon load failed, trying to fallback to reliable API:",u);try{const t=new URL(u);r.value.icon=`https://api.afmax.cn/so/ico/index.php?r=https://${t.hostname}`;return}catch{}}r.value.icon=""},ht=()=>{we.value=!0,!be.value&&Ve()},gt=()=>{be.value=!1,we.value&&Ve()},ft=()=>{we.value=!1},ke=L(!0),he=L(!1),pt=async u=>{const t=u.trim();if(!t)return null;if(t.startsWith("/icon-cache/"))return t;const a=t.startsWith("data:")?{dataUrl:t}:/^https?:\/\//i.test(t)?{url:t}:null;if(!a)return null;try{const y=await fetch("/api/icon-cache",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!y.ok)return null;const m=await y.json();if(m&&m.success&&typeof m.path=="string"&&m.path)return m.path}catch{}return null},mt=async()=>{if(!r.value.title&&!r.value.url)return alert("Ê†áÈ¢òÂíåÈìæÊé•ÊÄªÂæóÂÜô‰∏Ä‰∏™ÂêßÔºÅ");he.value=!0;try{if(h.value==="image"&&ke.value){const u=(r.value.icon||"").trim();if(u&&!u.startsWith("/icon-cache/")){const t=await pt(u);t&&(r.value.icon=t)}}l("save",{item:{...r.value,id:s.data?.id},groupId:E.value||s.groupId}),xe()}finally{he.value=!1}},Oe=L(null),Pe=L(null),{width:ze,height:Ne}=$t(),{style:vt,x:yt,y:xt}=It(Oe,{initialValue:{x:ze.value/2-224,y:Ne.value/2-300},handle:Pe,preventDefault:!0});return pe(()=>s.show,u=>{u&&(yt.value=ze.value/2-224,xt.value=Math.max(20,Ne.value/2-300))}),(u,t)=>n.show?(w(),k("div",Ks,[o("div",{ref_key:"modalRef",ref:Oe,style:Ae(ce(vt)),class:"fixed bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden pointer-events-auto"},[o("div",{ref_key:"headerRef",ref:Pe,class:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white cursor-move select-none"},[o("h3",Gs,D(n.data?"‰øÆÊîπÈ°πÁõÆ":"Ê∑ªÂä†Êñ∞È°πÁõÆ"),1),o("div",Hs,[le(os,{modelValue:E.value,"onUpdate:modelValue":t[0]||(t[0]=a=>E.value=a)},null,8,["modelValue"]),t[31]||(t[31]=o("div",{class:"w-px h-4 bg-gray-200 mx-1"},null,-1)),t[32]||(t[32]=o("span",{class:"text-xs font-bold text-gray-500"},"ÂÖ¨ÂºÄ",-1)),o("label",Ys,[_(o("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=a=>r.value.isPublic=a),class:"sr-only peer"},null,512),[[Te,r.value.isPublic]]),t[30]||(t[30]=o("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-900"},null,-1))])]),o("button",{onClick:xe,class:"text-gray-400 hover:text-gray-600 text-2xl leading-none"}," √ó ")],512),o("div",Js,[o("div",Qs,[o("div",Xs,[t[33]||(t[33]=o("label",{class:"block text-sm font-medium text-gray-600 mb-1"},[Z("Ê†áÈ¢ò "),o("span",{class:"text-red-500"},"*")],-1)),o("div",Zs,[_(o("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.value.title=a),type:"text",class:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-gray-900 outline-none transition-colors pr-24",placeholder:"‰æãÂ¶ÇÔºöÊàëÁöÑÂçöÂÆ¢"},null,512),[[U,r.value.title]]),o("button",{onClick:De,class:"absolute right-1 top-1 bottom-1 px-3 bg-gray-50 text-gray-600 text-xs font-medium rounded-md hover:bg-gray-100 flex items-center gap-1 transition-colors",title:"Ê†πÊçÆÊ†áÈ¢òÊêúÁ¥¢ÁΩëÁªúÂõæÊ†áÂ∫ì"}," ÂåπÈÖçÂõæÊ†á ")])]),o("div",null,[t[34]||(t[34]=o("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Ê†áÈ¢òÈ¢úËâ≤",-1)),o("div",qs,[_(o("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.titleColor=a),type:"color",class:"w-8 h-8 rounded cursor-pointer border-none p-0 bg-transparent",title:"ÈÄâÊã©Ê†áÈ¢òÈ¢úËâ≤"},null,512),[[U,r.value.titleColor]]),r.value.titleColor?(w(),k("button",{key:0,onClick:t[4]||(t[4]=a=>r.value.titleColor=""),class:"ml-2 text-xs text-gray-400 hover:text-red-500",title:"Ê∏ÖÈô§È¢úËâ≤"}," ‚úï ")):B("",!0)])])]),c.value?B("",!0):(w(),k("div",en,[t[35]||(t[35]=o("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"ÊèèËø∞ (Ê∞¥Âπ≥Ê®°ÂºèÊòæÁ§∫ÔºåÊØèË°åÂØπÂ∫î‰∏ÄË°åÊñáÂ≠ó)",-1)),_(o("textarea",{"onUpdate:modelValue":t[5]||(t[5]=a=>d.value=a),onInput:f,class:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:border-gray-900 outline-none transition-colors text-sm resize-none overflow-hidden",placeholder:`Á¨¨‰∏ÄË°å (‰∏ä)
Á¨¨‰∫åË°å (‰∏≠)
Á¨¨‰∏âË°å (‰∏ã)`,rows:"3"},null,544),[[U,d.value]])])),o("div",null,[o("label",{class:"block text-sm font-medium text-gray-600 mb-1"},[t[36]||(t[36]=Z("Â§ñÁΩëÈìæÊé• ",-1)),t[37]||(t[37]=o("span",{class:"text-red-500"},"*",-1)),o("button",{onClick:it,class:"ml-2 text-xs text-gray-500 hover:text-gray-900 hover:underline",title:"Ê∑ªÂä†Â§áÁî®Â§ñÁΩëÂú∞ÂùÄ"}," + Â§áÁî®Âú∞ÂùÄ ")]),o("div",tn,[_(o("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>r.value.url=a),type:"text",class:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-gray-900 outline-none transition-colors pr-24",placeholder:"https://example.com"},null,512),[[U,r.value.url]]),o("button",{onClick:te,class:"absolute right-1 top-1 bottom-1 px-3 bg-gray-50 text-gray-600 text-xs font-medium rounded-md hover:bg-gray-100 flex items-center gap-1 transition-colors",title:"Ê†πÊçÆÈìæÊé•‰∫åÁ∫ßÂüüÂêçÂåπÈÖçÂõæÊ†á"}," ÂåπÈÖçÂõæÊ†á ")]),r.value.backupUrls&&r.value.backupUrls.length>0?(w(),k("div",sn,[(w(!0),k(ee,null,ue(r.value.backupUrls,(a,y)=>(w(),k("div",{key:"backup-wan-"+y,class:"flex flex-col sm:flex-row gap-2 items-start sm:items-center p-2 bg-gray-50 rounded-lg border border-gray-100"},[o("div",nn,[_(o("input",{"onUpdate:modelValue":m=>a.name=m,type:"text",maxlength:"50",class:O(["w-full px-3 py-2 rounded-lg border focus:border-gray-900 outline-none transition-colors text-sm pr-8",[r.value.backupUrls.filter((m,$)=>m.name&&m.name===a.name&&$!==y).length>0?"border-red-300":"border-gray-200"]]),placeholder:"ÂêçÁß∞",onKeydown:[t[7]||(t[7]=se(ae(()=>{},["prevent"]),["enter"])),t[8]||(t[8]=se(m=>je(m),["tab"]))]},null,42,rn),[[U,a.name]]),a.name?(w(),k("button",{key:0,onClick:m=>a.name="",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 rounded-full p-0.5",title:"Ê∏ÖÈô§"},[...t[38]||(t[38]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3"},[o("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)])],8,on)):B("",!0)]),o("div",an,[_(o("input",{"onUpdate:modelValue":m=>a.url=m,type:"text",maxlength:"500",class:O(["w-full px-3 py-2 rounded-lg border focus:border-gray-900 outline-none transition-colors text-sm pr-8",Re(a.url)?"border-gray-200":"border-red-300 bg-red-50"]),placeholder:"ËØ∑ËæìÂÖ•ÂÆåÊï¥URLÂú∞ÂùÄ",onKeydown:t[9]||(t[9]=se(ae(()=>{},["prevent"]),["enter"]))},null,42,ln),[[U,a.url]]),a.url?(w(),k("button",{key:0,onClick:m=>a.url="",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 rounded-full p-0.5",title:"Ê∏ÖÈô§"},[...t[39]||(t[39]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3"},[o("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)])],8,un)):B("",!0)]),o("button",{onClick:m=>ut(y),class:"text-gray-400 hover:text-red-500 p-2 sm:p-1 self-end sm:self-center",title:"Âà†Èô§"}," ‚úï ",8,cn)]))),128))])):B("",!0)]),o("div",null,[o("label",{class:"block text-sm font-medium text-gray-600 mb-1"},[t[40]||(t[40]=Z("ÂÜÖÁΩëÈìæÊé• ",-1)),t[41]||(t[41]=o("span",{class:"text-gray-400 text-xs"},"(ÈÄâÂ°´ÔºåÂÜÖÁΩëËÆøÈóÆÊó∂‰ºòÂÖàË∑≥ËΩ¨)",-1)),o("button",{onClick:ct,class:"ml-2 text-xs text-gray-500 hover:text-gray-900 hover:underline",title:"Ê∑ªÂä†Â§áÁî®ÂÜÖÁΩëÂú∞ÂùÄ"}," + Â§áÁî®Âú∞ÂùÄ ")]),_(o("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>r.value.lanUrl=a),type:"text",placeholder:"http://192.168.1.x:8080",class:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-gray-900 outline-none transition-colors"},null,512),[[U,r.value.lanUrl]]),r.value.backupLanUrls&&r.value.backupLanUrls.length>0?(w(),k("div",dn,[(w(!0),k(ee,null,ue(r.value.backupLanUrls,(a,y)=>(w(),k("div",{key:"backup-lan-"+y,class:"flex flex-col sm:flex-row gap-2 items-start sm:items-center p-2 bg-gray-50 rounded-lg border border-gray-100"},[o("div",hn,[_(o("input",{"onUpdate:modelValue":m=>a.name=m,type:"text",maxlength:"50",class:O(["w-full px-3 py-2 rounded-lg border focus:border-gray-900 outline-none transition-colors text-sm pr-8",[r.value.backupLanUrls.filter((m,$)=>m.name&&m.name===a.name&&$!==y).length>0?"border-red-300":"border-gray-200"]]),placeholder:"ÂêçÁß∞",onKeydown:[t[11]||(t[11]=se(ae(()=>{},["prevent"]),["enter"])),t[12]||(t[12]=se(m=>je(m),["tab"]))]},null,42,gn),[[U,a.name]]),a.name?(w(),k("button",{key:0,onClick:m=>a.name="",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 rounded-full p-0.5",title:"Ê∏ÖÈô§"},[...t[42]||(t[42]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3"},[o("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)])],8,fn)):B("",!0)]),o("div",pn,[_(o("input",{"onUpdate:modelValue":m=>a.url=m,type:"text",maxlength:"500",class:O(["w-full px-3 py-2 rounded-lg border focus:border-gray-900 outline-none transition-colors text-sm pr-8",Re(a.url)?"border-gray-200":"border-red-300 bg-red-50"]),placeholder:"ËØ∑ËæìÂÖ•ÂÆåÊï¥URLÂú∞ÂùÄ",onKeydown:t[13]||(t[13]=se(ae(()=>{},["prevent"]),["enter"]))},null,42,mn),[[U,a.url]]),a.url?(w(),k("button",{key:0,onClick:m=>a.url="",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 rounded-full p-0.5",title:"Ê∏ÖÈô§"},[...t[43]||(t[43]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3"},[o("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)])],8,vn)):B("",!0)]),o("button",{onClick:m=>dt(y),class:"text-gray-400 hover:text-red-500 p-2 sm:p-1 self-end sm:self-center",title:"Âà†Èô§"}," ‚úï ",8,yn)]))),128))])):B("",!0)]),o("div",null,[o("div",xn,[o("div",bn,[o("div",wn,[t[44]||(t[44]=o("label",{class:"text-sm font-medium text-gray-600"},"ÂõæÊ†áÊ†∑Âºè",-1)),o("div",kn,[o("button",{onClick:t[14]||(t[14]=a=>h.value="image"),class:O(["px-3 py-1 rounded-md transition-all",h.value==="image"?"bg-white text-gray-800 shadow-sm font-medium":"text-gray-500 hover:text-gray-700"])}," ÂõæÁâá ",2),o("button",{onClick:t[15]||(t[15]=a=>h.value="emoji"),class:O(["px-3 py-1 rounded-md transition-all",h.value==="emoji"?"bg-white text-gray-800 shadow-sm font-medium":"text-gray-500 hover:text-gray-700"])}," Emoji ",2)])]),h.value==="image"?(w(),k("label",An,[_(o("input",{"onUpdate:modelValue":t[16]||(t[16]=a=>ke.value=a),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-gray-900 focus:ring-gray-500"},null,512),[[Te,ke.value]]),t[45]||(t[45]=o("span",null,"‰øùÂ≠òÂà∞Êú¨Âú∞ÁºìÂ≠òÔºàÊé®ËçêÔºåÈÖçÁΩÆÊõ¥Â∞èÔºâ",-1))])):B("",!0),o("div",Cn,[o("button",{onClick:G,disabled:g.value,class:O(["text-xs flex items-center gap-1 px-3 py-1.5 rounded-lg font-medium transition-all",g.value?"bg-gray-100 text-gray-400":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[g.value?(w(),k("span",In)):B("",!0),Z(" "+D(g.value?"ÈÄÇÈÖç‰∏≠...":"Êú¨Âú∞ÂåπÈÖç"),1)],10,En),o("button",{onClick:lt,disabled:g.value,class:O(["text-xs flex items-center gap-1 px-3 py-1.5 rounded-lg font-medium transition-all",g.value?"bg-gray-100 text-gray-400":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[g.value?(w(),k("span",Mn)):B("",!0),Z(" "+D(g.value?"Ê≠£Âú®Ëé∑Âèñ...":"Ëá™Âä®ÊäìÂèñ"),1)],10,$n)])]),o("div",Bn,[h.value==="image"?(w(),k(ee,{key:0},[r.value.icon?(w(),k("img",{key:0,src:ce(i).getAssetUrl(r.value.icon),class:"w-full h-full object-cover transition-transform duration-200",style:Ae({transform:`scale(${(r.value.iconSize??100)/100})`}),onError:ht,onLoad:ft},null,44,_n)):(w(),k("span",Fn,"È¢ÑËßà"))],64)):(w(),k(ee,{key:1},[r.value.icon?(w(),k("span",{key:0,class:"text-3xl transition-transform duration-200",style:Ae({transform:`scale(${(r.value.iconSize??100)/100})`})},D(r.value.icon),5)):(w(),k("span",Sn,"Emoji"))],64))])]),h.value==="emoji"?(w(),k("div",Ln,[_(o("input",{"onUpdate:modelValue":t[17]||(t[17]=a=>r.value.icon=a),type:"text",class:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-gray-900 outline-none pr-20 text-xl",placeholder:"ËæìÂÖ• Emoji"},null,512),[[U,r.value.icon]]),o("button",{onClick:T,class:"absolute right-1 top-1 bottom-1 px-3 bg-gray-50 text-gray-600 text-xs font-medium rounded-md hover:bg-gray-100 flex items-center gap-1 transition-colors"}," ÈöèÊú∫ ")])):(w(),k("div",Un,[o("div",Dn,[_(o("input",{"onUpdate:modelValue":t[18]||(t[18]=a=>r.value.icon=a),type:"text",placeholder:"ÂõæÁâá URL Âú∞ÂùÄ...",class:"w-full px-4 py-2 rounded-lg border border-gray-200 text-sm focus:border-gray-900 outline-none",onFocus:t[19]||(t[19]=a=>be.value=!0),onBlur:gt},null,544),[[U,r.value.icon]])]),t[46]||(t[46]=o("div",{class:"text-xs text-gray-400 text-center flex items-center gap-2 before:h-px before:bg-gray-200 before:flex-1 after:h-px after:bg-gray-200 after:flex-1"}," Êàñ ",-1)),le(We,{modelValue:r.value.icon,"onUpdate:modelValue":t[20]||(t[20]=a=>r.value.icon=a)},null,8,["modelValue"])])),o("div",Rn,[t[47]||(t[47]=o("span",{class:"text-xs text-gray-400 whitespace-nowrap"},"Áº©Êîæ",-1)),_(o("input",{type:"range","onUpdate:modelValue":t[21]||(t[21]=a=>r.value.iconSize=a),min:"20",max:"200",step:"5",class:"w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-400"},null,512),[[U,r.value.iconSize,void 0,{number:!0}]]),o("span",jn,D(r.value.iconSize)+"%",1)])]),o("div",Vn,[t[50]||(t[50]=o("label",{class:"block text-sm font-medium text-gray-600 mb-2"},[Z("Âç°ÁâáËÉåÊôØ "),o("span",{class:"text-xs text-gray-400 font-normal"},"(ÂèØÈÄâÔºåÊîØÊåÅÊ®°Á≥äÂíåÈÅÆÁΩ©ÊïàÊûú)")],-1)),o("div",On,[o("div",Pn,[_(o("input",{"onUpdate:modelValue":t[22]||(t[22]=a=>r.value.backgroundImage=a),type:"text",placeholder:"ËÉåÊôØÂõæ URL...",class:"flex-1 px-4 py-2 rounded-lg border border-gray-200 text-sm focus:border-gray-900 outline-none"},null,512),[[U,r.value.backgroundImage]]),r.value.backgroundImage?(w(),k("button",{key:0,onClick:t[23]||(t[23]=a=>r.value.backgroundImage=""),class:"text-gray-400 hover:text-red-500 px-2",title:"Ê∏ÖÈô§ËÉåÊôØ"}," ‚úï ")):B("",!0)]),le(We,{modelValue:r.value.backgroundImage,"onUpdate:modelValue":t[24]||(t[24]=a=>r.value.backgroundImage=a),crop:!1,uploadOnly:!0,previewStyle:{filter:`blur(${r.value.backgroundBlur??6}px)`,transform:"scale(1.1)"},overlayStyle:{backgroundColor:`rgba(0,0,0,${r.value.backgroundMask??.3})`}},null,8,["modelValue","previewStyle","overlayStyle"]),r.value.backgroundImage?(w(),k("div",zn,[o("div",null,[o("label",Nn,[t[48]||(t[48]=o("span",null,"Ê®°Á≥äÂçäÂæÑ",-1)),o("span",null,D(r.value.backgroundBlur)+"px",1)]),_(o("input",{type:"range","onUpdate:modelValue":t[25]||(t[25]=a=>r.value.backgroundBlur=a),min:"0",max:"20",step:"1",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-400"},null,512),[[U,r.value.backgroundBlur,void 0,{number:!0}]])]),o("div",null,[o("label",Tn,[t[49]||(t[49]=o("span",null,"ÈÅÆÁΩ©ÊµìÂ∫¶",-1)),o("span",null,D(Math.round((r.value.backgroundMask||0)*100))+"%",1)]),_(o("input",{type:"range","onUpdate:modelValue":t[26]||(t[26]=a=>r.value.backgroundMask=a),min:"0",max:"1",step:"0.1",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-400"},null,512),[[U,r.value.backgroundMask,void 0,{number:!0}]])]),o("div",Wn,[o("button",{onClick:t[27]||(t[27]=a=>{r.value.backgroundImage="",r.value.backgroundBlur=6,r.value.backgroundMask=.3}),class:"text-xs text-red-500 hover:text-red-700 underline"}," ÁßªÈô§ËÉåÊôØ ")])])):B("",!0)])])]),o("div",Kn,[o("button",{onClick:xe,class:"px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors text-sm font-medium"}," ÂèñÊ∂à "),o("button",{onClick:mt,disabled:he.value,class:"px-6 py-2 rounded-lg bg-gray-900 text-white hover:bg-black transition-all active:scale-95 text-sm font-medium"},D(he.value?"‰øùÂ≠ò‰∏≠...":n.data?"‰øùÂ≠ò‰øÆÊîπ":"Á°ÆËÆ§Ê∑ªÂä†"),9,Gn)])],4),le(Qt,{show:p.value,"onUpdate:show":t[28]||(t[28]=a=>p.value=a),candidates:v.value,title:r.value.title,source:b.value,onSelect:de,onCancelLink:t[29]||(t[29]=a=>p.value=!1)},null,8,["show","candidates","title","source"])])):B("",!0)}}),Qn=Qe(Hn,[["__scopeId","data-v-7db1737b"]]);export{Qn as default};
