import{d as C,u as M,r as c,w as B,D as j,e as r,f as p,b as i,h as e,F as N,t as g,j as v,y as x,A as b,B as h}from"./index-0Xhfa8Kb.js";const S="/ICON.PNG",V={key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4"},D={class:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden transform transition-all scale-100"},K={class:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"},R={class:"text-lg font-bold text-gray-800 flex items-center gap-2"},F={key:0},T={class:"p-6"},U={class:"mb-5 space-y-4"},q={key:0},z={key:0,class:"mt-4 text-center"},E=C({__name:"LoginModal",props:{show:{type:Boolean}},emits:["update:show"],setup(m,{emit:w}){const k=m,_=w,l=M(),a=c(""),s=c(""),o=c(!1),d=c(null);B(()=>k.show,n=>{n&&(a.value="",s.value="",o.value=!1,j(()=>{if(l.systemConfig.authMode==="multi"){const t=document.querySelector('input[placeholder="ç”¨æˆ·å"]');t?t.focus():d.value?.focus()}else d.value?.focus()}))});const y=()=>_("update:show",!1),f=async()=>{if(l.systemConfig.authMode==="multi"&&!a.value.trim()){alert("è¯·è¾“å…¥ç”¨æˆ·å");return}if(!s.value){alert("è¯·è¾“å…¥å¯†ç ");return}try{o.value?(await l.register(a.value,s.value),alert("æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•"),o.value=!1,s.value=""):await l.login(a.value,s.value)&&y()}catch(n){alert(n.message||"æ“ä½œå¤±è´¥ï¼"),s.value=""}};return(n,t)=>m.show?(i(),r("div",V,[e("div",D,[e("div",K,[e("h3",R,[o.value?(i(),r("span",F,"ğŸ‘¤ æ–°ç”¨æˆ·æ³¨å†Œ")):(i(),r(N,{key:1},[t[3]||(t[3]=e("img",{src:S,class:"w-6 h-6 object-contain",alt:"lock"},null,-1)),e("span",null,g(v(l).systemConfig.authMode==="single"?"ç®¡ç†å‘˜ç™»å½•":"ç”¨æˆ·ç™»å½•"),1)],64))]),e("button",{onClick:y,class:"text-gray-400 hover:text-gray-600 text-2xl leading-none"}," Ã— ")]),e("div",T,[e("div",U,[v(l).systemConfig.authMode==="multi"?(i(),r("div",q,[x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>a.value=u),type:"text",placeholder:"ç”¨æˆ·å",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-center text-lg tracking-widest",onKeyup:h(f,["enter"])},null,544),[[b,a.value]])])):p("",!0),e("div",null,[x(e("input",{ref_key:"inputRef",ref:d,"onUpdate:modelValue":t[1]||(t[1]=u=>s.value=u),type:"password",placeholder:"å¯†ç ",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-center text-lg tracking-widest",onKeyup:h(f,["enter"])},null,544),[[b,s.value]])])]),e("button",{onClick:f,class:"w-full bg-gray-800 text-white py-3 rounded-xl font-bold hover:bg-black active:scale-95 transition-all shadow-lg"},g(o.value?"æ³¨ å†Œ":"ç™» å½•"),1),v(l).systemConfig.authMode==="multi"?(i(),r("div",z,[e("button",{onClick:t[2]||(t[2]=u=>o.value=!o.value),class:"text-sm text-gray-500 hover:text-gray-800 hover:underline transition-colors"},g(o.value?"å·²æœ‰è´¦å·ï¼Ÿå»ç™»å½•":"æ²¡æœ‰è´¦å·ï¼Ÿå»æ³¨å†Œ"),1)])):p("",!0)])])])):p("",!0)}});export{E as default};
